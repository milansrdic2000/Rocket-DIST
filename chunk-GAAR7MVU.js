import{$ as f,A as E,Aa as Z,B as ze,Ba as et,C as He,Ca as tt,D as Q,E as V,Eb as gt,F as we,Fa as F,Ga as Pe,H as be,Ha as it,I as B,Ia as me,J as ee,Ja as nt,K as m,Ka as ot,L as h,N as Ue,P as j,Pa as te,Q as se,R as K,Ra as rt,S as M,T as c,Ta as Y,U as J,V as a,Va as st,W as l,X as v,Za as at,_ as T,a as Ne,aa as C,ab as pe,b as D,ba as Ge,c as ke,ca as ae,d as qe,da as N,e as De,ea as k,eb as lt,f as ve,fa as q,fb as dt,g as Re,ga as $e,gb as ct,h as ne,ha as u,i as _e,ia as le,ja as X,jb as mt,k as je,ka as Qe,l as Fe,la as Be,lb as pt,m as We,ma as Ke,na as Je,nb as ht,o as Ee,oa as de,p as R,pa as Xe,q as G,qa as ye,r as Le,rb as ut,s as U,t as A,v as w,va as Ze,w as $,wa as Ye,x as oe,xa as xe,y as re,z as _,za as ce}from"./chunk-FCCK2BL5.js";import{a as O,b as H,g as Ce}from"./chunk-MON7YFGF.js";var W=(()=>{let i=class i{constructor(e){this.http=e,this.SERVER_URL="http://localhost:3000",this.ASSET_URL_PATH="https://rockettt.rs/api/admin",this.BASE_API_PATH="/api/admin",this.FULL_API_PATH=`${this.SERVER_URL}${this.BASE_API_PATH}`}addPost(e){return this.http.post(`${this.FULL_API_PATH}/posts`,e)}getAllPosts(){return this.http.get(`${this.FULL_API_PATH}/posts`)}getPostById(e){return this.http.get(`${this.FULL_API_PATH}/posts/${e}`)}updatePost(e){return this.http.put(`${this.FULL_API_PATH}/posts/${e.id}`,e)}updatePostContent(e,t){return this.http.put(`${this.FULL_API_PATH}/posts/${e}/content/${t.id}`,t)}uploadImage(e){return this.http.post(`${this.ASSET_URL_PATH}/upload`,e)}getUploadedImages(){return this.http.get(`${this.ASSET_URL_PATH}/uploads`)}deletePostcontent(e,t){return this.http.delete(`${this.FULL_API_PATH}/posts/${t}/content/${e}`)}deletePost(e){return this.http.delete(`${this.FULL_API_PATH}/posts/${e}`)}addPostContent(e,t){return this.http.post(`${this.FULL_API_PATH}/posts/${e}/content`,t)}};i.\u0275fac=function(t){return new(t||i)(U(me))},i.\u0275prov=R({token:i,factory:i.\u0275fac});let o=i;return o})();var Ct=(()=>{let i=class i{constructor(e){this.router=e,this.deletePost=new D}editPost(){this.router.navigate(["admin/news-generator",this.id])}onDeletePost(){this.deletePost.next(this.id)}};i.\u0275fac=function(t){return new(t||i)(h(Y))},i.\u0275cmp=w({type:i,selectors:[["app-admin-news-list-item"]],inputs:{id:"id",title:"title",shortDescription:"shortDescription",imgUrl:"imgUrl"},outputs:{deletePost:"deletePost"},decls:12,vars:3,consts:[[1,"list-item-content"],[1,"left-side"],[1,"short-description",3,"innerHtml"],[1,"right-side"],["alt","news-image",3,"src"],[1,"action-bar"],[1,"",3,"click"],[3,"click"]],template:function(t,n){t&1&&(a(0,"div",0)(1,"div",1)(2,"h3"),u(3),l(),v(4,"div",2),l(),a(5,"div",3),v(6,"img",4),l()(),a(7,"div",5)(8,"button",6),f("click",function(){return n.editPost()}),u(9,"Izmeni"),l(),a(10,"button",7),f("click",function(){return n.onDeletePost()}),u(11,"Obri\u0161i"),l()()),t&2&&(m(3),le(n.title),m(),c("innerHtml",n.shortDescription,B),m(2),c("src",n.imgUrl,ee))},styles:[".main-horizontal-padding[_ngcontent-%COMP%]{padding:0 12.8rem}.first-section[_ngcontent-%COMP%]{margin-top:150px}.w-1-1[_ngcontent-%COMP%]{width:100%!important}.w-1-2[_ngcontent-%COMP%]{width:50%!important}.w-1-3[_ngcontent-%COMP%]{width:33.3333333333%!important}.list-item-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-direction:row;gap:1.6rem}.list-item-content[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:row;gap:1.6rem;width:20%;border:.2rem solid #ffed00}.list-item-content[_ngcontent-%COMP%]   .right-side[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:100%}.action-bar[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;flex-direction:row;gap:1.6rem}"]});let o=i;return o})();function St(o,i){if(o&1){let s=T();a(0,"li")(1,"app-admin-news-list-item",7),f("deletePost",function(t){_(s);let n=C();return E(n.handleDeletePost(t))}),l()()}if(o&2){let s=i.$implicit;m(),c("id",s.id)("title",s.title)("shortDescription",s.shortDescription)("imgUrl",s.imgUrl)}}var vt=(()=>{let i=class i{constructor(e,t){this.router=e,this.adminService=t,this.posts=[]}ngOnInit(){this.getAllNews()}getAllNews(){this.adminService.getAllPosts().subscribe(e=>{this.posts=e.map(t=>{let n=t.contents?.find(d=>d.elementType==="text")?.html||"Empty post",r=t.contents?.find(d=>d.elementType==="image")?.imgUrl;return H(O({},t),{imgUrl:r,shortDescription:n})}),console.log(this.posts)})}addNews(){this.router.navigate(["admin/news-generator"])}handleDeletePost(e){this.adminService.deletePost(e).subscribe(()=>{this.getAllNews()})}};i.\u0275fac=function(t){return new(t||i)(h(Y),h(W))},i.\u0275cmp=w({type:i,selectors:[["app-admin-panel"]],decls:14,vars:1,consts:[[1,"news-control-section","first-section"],[1,"news-control-container"],[1,"news-control-header"],[1,"news-control-content"],[4,"ngFor","ngForOf"],[1,"action-bar"],[3,"click"],[3,"deletePost","id","title","shortDescription","imgUrl"]],template:function(t,n){t&1&&(v(0,"app-navigation"),a(1,"section",0)(2,"h1"),u(3,"Admin panel"),l(),a(4,"div",1)(5,"div",2)(6,"h2"),u(7,"Vesti"),l()(),a(8,"div",3)(9,"ul"),M(10,St,2,4,"li",4),l(),a(11,"div",5)(12,"button",6),f("click",function(){return n.addNews()}),u(13,"Dodaj Clanak"),l()()()()()),t&2&&(m(10),c("ngForOf",n.posts))},dependencies:[pe,Z,Ct],styles:[".main-horizontal-padding[_ngcontent-%COMP%]{padding:0 12.8rem}.first-section[_ngcontent-%COMP%]{margin-top:150px}.w-1-1[_ngcontent-%COMP%]{width:100%!important}.w-1-2[_ngcontent-%COMP%]{width:50%!important}.w-1-3[_ngcontent-%COMP%]{width:33.3333333333%!important}.news-control-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:.2rem solid white;padding:1.6rem 0}.action-bar[_ngcontent-%COMP%]{margin-top:1.6rem}"]});let o=i;return o})();var he={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},Oe=new Le("config",{providedIn:"root",factory:()=>({modules:he})});var Vt=[[["","above-quill-editor-toolbar",""]],[["","quill-editor-toolbar",""]],[["","below-quill-editor-toolbar",""]]],At=["[above-quill-editor-toolbar]","[quill-editor-toolbar]","[below-quill-editor-toolbar]"];function Nt(o,i){o&1&&v(0,"pre",0)}function kt(o,i){o&1&&v(0,"div",0)}function qt(o,i){if(o&1&&M(0,Nt,1,0,"pre",0)(1,kt,1,0),o&2){let s=C();J(0,s.preserve?0:1)}}function Dt(o,i){o&1&&v(0,"pre",0)}function Rt(o,i){o&1&&v(0,"div",0)}function jt(o,i){if(o&1&&M(0,Dt,1,0,"pre",0)(1,Rt,1,0),o&2){let s=C();J(0,s.preserve?0:1)}}function Ft(o,i){o&1&&v(0,"pre",0)}function Wt(o,i){o&1&&v(0,"div",0)}var ie=(o,i)=>o||i||"html",Te=(()=>{let i=class i{constructor(e,t){this.config=t,this.quill$=Re(()=>Ce(this,null,function*(){if(!this.Quill){let n=this.document.addEventListener;this.document.addEventListener=this.document.__zone_symbol__addEventListener||this.document.addEventListener;let r=yield import("./chunk-YFZ444RX.js");this.document.addEventListener=n,this.Quill=r.default?.default??r.default??r}return this.config.customOptions?.forEach(n=>{let r=this.Quill.import(n.import);r.whitelist=n.whitelist,this.Quill.register(r,!0,this.config.suppressGlobalRegisterWarning)}),yield this.registerCustomModules(this.Quill,this.config.customModules,this.config.suppressGlobalRegisterWarning)})).pipe(Fe({bufferSize:1,refCount:!0})),this.document=e.get(xe),this.config||(this.config={modules:he})}getQuill(){return this.quill$}registerCustomModules(e,t,n){return Ce(this,null,function*(){if(Array.isArray(t))for(let{implementation:r,path:d}of t)ke(r)&&(r=yield qe(r)),e.register(d,r,n);return e})}};i.\u0275fac=function(t){return new(t||i)(U(He),U(Oe,8))},i.\u0275prov=R({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})(),Lt=(()=>{let i=class i{constructor(){this.required=!1,this.customToolbarPosition="top",this.styles=null,this.strict=!0,this.customOptions=[],this.customModules=[],this.preserveWhitespace=!1,this.trimOnValidation=!1,this.compareValues=!1,this.filterNull=!1,this.defaultEmptyValue=null,this.onEditorCreated=new V,this.onEditorChanged=new V,this.onContentChanged=new V,this.onSelectionChanged=new V,this.onFocus=new V,this.onBlur=new V,this.onNativeFocus=new V,this.onNativeBlur=new V,this.disabled=!1,this.preserve=!1,this.toolbarPosition="top",this.subscription=null,this.quillSubscription=null,this.elementRef=A(Q),this.document=A(xe),this.cd=A(Ye),this.domSanitizer=A(te),this.platformId=A(we),this.renderer=A(j),this.zone=A(se),this.service=A(Te),this.valueGetter=(e,t)=>{let n=t.querySelector(".ql-editor").innerHTML;(n==="<p><br></p>"||n==="<div><br></div>")&&(n=this.defaultEmptyValue);let r=n,d=ie(this.format,this.service.config.format);if(d==="text")r=e.getText();else if(d==="object")r=e.getContents();else if(d==="json")try{r=JSON.stringify(e.getContents())}catch{r=e.getText()}return r},this.valueSetter=(e,t)=>{let n=ie(this.format,this.service.config.format);if(n==="html")return([!0,!1].includes(this.sanitize)?this.sanitize:this.service.config.sanitize||!1)&&(t=this.domSanitizer.sanitize(be.HTML,t)),e.clipboard.convert(t);if(n==="json")try{return JSON.parse(t)}catch{return[{insert:t}]}return t},this.selectionChangeHandler=(e,t,n)=>{let r=this.trackChanges||this.service.config.trackChanges,d=!e&&!!this.onModelTouched&&(n==="user"||r&&r==="all");!this.onBlur.observed&&!this.onFocus.observed&&!this.onSelectionChanged.observed&&!d||this.zone.run(()=>{e===null?this.onBlur.emit({editor:this.quillEditor,source:n}):t===null&&this.onFocus.emit({editor:this.quillEditor,source:n}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:t,range:e,source:n}),d&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(e,t,n)=>{let r=this.quillEditor.getText(),d=this.quillEditor.getContents(),g=this.editorElem.querySelector(".ql-editor").innerHTML;(g==="<p><br></p>"||g==="<div><br></div>")&&(g=this.defaultEmptyValue);let b=this.trackChanges||this.service.config.trackChanges,y=(n==="user"||b&&b==="all")&&!!this.onModelChange;!this.onContentChanged.observed&&!y||this.zone.run(()=>{y&&this.onModelChange(this.valueGetter(this.quillEditor,this.editorElem)),this.onContentChanged.emit({content:d,delta:e,editor:this.quillEditor,html:g,oldDelta:t,source:n,text:r}),this.cd.markForCheck()})},this.editorChangeHandler=(e,t,n,r)=>{if(this.onEditorChanged.observed)if(e==="text-change"){let d=this.quillEditor.getText(),g=this.quillEditor.getContents(),b=this.editorElem.querySelector(".ql-editor").innerHTML;(b==="<p><br></p>"||b==="<div><br></div>")&&(b=this.defaultEmptyValue),this.zone.run(()=>{this.onEditorChanged.emit({content:g,delta:t,editor:this.quillEditor,event:e,html:b,oldDelta:n,source:r,text:d}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:e,oldRange:n,range:t,source:r}),this.cd.markForCheck()})}}static normalizeClassNames(e){return e.trim().split(" ").reduce((n,r)=>{let d=r.trim();return d&&n.push(d),n},[])}ngOnInit(){this.preserve=this.preserveWhitespace,this.toolbarPosition=this.customToolbarPosition}ngAfterViewInit(){Pe(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe(ve(e=>{let t=[this.service.registerCustomModules(e,this.customModules)],n=this.beforeRender??this.service.config.beforeRender;return n&&t.push(n()),Promise.all(t).then(()=>e)})).subscribe(e=>{this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");let t=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),n=Object.assign({},this.modules||this.service.config.modules);t?n.toolbar=t:n.toolbar===void 0&&(n.toolbar=he.toolbar);let r=this.placeholder!==void 0?this.placeholder:this.service.config.placeholder;r===void 0&&(r="Insert text here ..."),this.styles&&Object.keys(this.styles).forEach(I=>{this.renderer.setStyle(this.editorElem,I,this.styles[I])}),this.classes&&this.addClasses(this.classes),this.customOptions.forEach(I=>{let z=e.import(I.import);z.whitelist=I.whitelist,e.register(z,!0)});let d=this.bounds&&this.bounds==="self"?this.editorElem:this.bounds;d||(d=this.service.config.bounds?this.service.config.bounds:this.document.body);let g=this.debug;!g&&g!==!1&&this.service.config.debug&&(g=this.service.config.debug);let b=this.readOnly;!b&&this.readOnly!==!1&&(b=this.service.config.readOnly!==void 0?this.service.config.readOnly:!1);let y=this.defaultEmptyValue;this.service.config.hasOwnProperty("defaultEmptyValue")&&(y=this.service.config.defaultEmptyValue);let S=this.scrollingContainer;!S&&this.scrollingContainer!==null&&(S=this.service.config.scrollingContainer===null||this.service.config.scrollingContainer?this.service.config.scrollingContainer:null);let P=this.formats;if(!P&&P===void 0&&(P=this.service.config.formats?[...this.service.config.formats]:this.service.config.formats===null?null:void 0),this.zone.runOutsideAngular(()=>{if(this.quillEditor=new e(this.editorElem,{bounds:d,debug:g,formats:P,modules:n,placeholder:r,readOnly:b,defaultEmptyValue:y,scrollingContainer:S,strict:this.strict,theme:this.theme||(this.service.config.theme?this.service.config.theme:"snow")}),this.onNativeBlur.observed&&(this.quillEditor.scroll.domNode.addEventListener("blur",()=>this.onNativeBlur.next({editor:this.quillEditor,source:"dom"})),this.quillEditor.getModule("toolbar").container.addEventListener("mousedown",I=>I.preventDefault())),this.onNativeFocus.observed&&this.quillEditor.scroll.domNode.addEventListener("focus",()=>this.onNativeFocus.next({editor:this.quillEditor,source:"dom"})),this.linkPlaceholder){let z=this.quillEditor?.theme?.tooltip?.root?.querySelector("input[data-link]");z?.dataset&&(z.dataset.link=this.linkPlaceholder)}}),this.content){if(ie(this.format,this.service.config.format)==="text")this.quillEditor.setText(this.content,"silent");else{let z=this.valueSetter(this.quillEditor,this.content);this.quillEditor.setContents(z,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),!(!this.onEditorCreated.observed&&!this.onValidatorChanged)&&requestAnimationFrame(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor),this.onEditorCreated.complete()})}))}ngOnDestroy(){this.dispose(),this.quillSubscription?.unsubscribe(),this.quillSubscription=null}ngOnChanges(e){if(this.quillEditor){if(e.readOnly&&this.quillEditor.enable(!e.readOnly.currentValue),e.placeholder&&(this.quillEditor.root.dataset.placeholder=e.placeholder.currentValue),e.defaultEmptyValue&&(this.quillEditor.root.dataset.defaultEmptyValue=e.defaultEmptyValue.currentValue),e.styles){let t=e.styles.currentValue,n=e.styles.previousValue;n&&Object.keys(n).forEach(r=>{this.renderer.removeStyle(this.editorElem,r)}),t&&Object.keys(t).forEach(r=>{this.renderer.setStyle(this.editorElem,r,this.styles[r])})}if(e.classes){let t=e.classes.currentValue,n=e.classes.previousValue;n&&this.removeClasses(n),t&&this.addClasses(t)}e.debounceTime&&this.addQuillEventListeners()}}addClasses(e){i.normalizeClassNames(e).forEach(t=>{this.renderer.addClass(this.editorElem,t)})}removeClasses(e){i.normalizeClassNames(e).forEach(t=>{this.renderer.removeClass(this.editorElem,t)})}writeValue(e){if(this.filterNull&&e===null||(this.content=e,!this.quillEditor))return;let t=ie(this.format,this.service.config.format),n=this.valueSetter(this.quillEditor,e);if(this.compareValues){let r=this.quillEditor.getContents();if(JSON.stringify(r)===JSON.stringify(n))return}if(e){t==="text"?this.quillEditor.setText(e):this.quillEditor.setContents(n);return}this.quillEditor.setText("")}setDisabledState(e=this.disabled){this.disabled=e,this.quillEditor&&(e?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){this.onModelTouched=e}registerOnValidatorChange(e){this.onValidatorChanged=e}validate(){if(!this.quillEditor)return null;let e={},t=!0,n=this.quillEditor.getText(),r=this.trimOnValidation?n.trim().length:n.length===1&&n.trim().length===0?0:n.length-1,d=this.quillEditor.getContents().ops,g=d&&d.length===1&&[`
`,""].includes(d[0].insert);return this.minLength&&r&&r<this.minLength&&(e.minLengthError={given:r,minLength:this.minLength},t=!1),this.maxLength&&r>this.maxLength&&(e.maxLengthError={given:r,maxLength:this.maxLength},t=!1),this.required&&!r&&g&&(e.requiredError={empty:!0},t=!1),t?null:e}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.subscription=new Ne,this.subscription.add(ne(this.quillEditor,"selection-change").subscribe(([n,r,d])=>{this.selectionChangeHandler(n,r,d)}));let e=ne(this.quillEditor,"text-change"),t=ne(this.quillEditor,"editor-change");typeof this.debounceTime=="number"&&(e=e.pipe(_e(this.debounceTime)),t=t.pipe(_e(this.debounceTime))),this.subscription.add(e.subscribe(([n,r,d])=>{this.textChangeHandler(n,r,d)})),this.subscription.add(t.subscribe(([n,r,d,g])=>{this.editorChangeHandler(n,r,d,g)}))})}dispose(){this.subscription!==null&&(this.subscription.unsubscribe(),this.subscription=null)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275dir=oe({type:i,inputs:{format:"format",theme:"theme",modules:"modules",debug:"debug",readOnly:"readOnly",placeholder:"placeholder",maxLength:"maxLength",minLength:"minLength",required:"required",formats:"formats",customToolbarPosition:"customToolbarPosition",sanitize:"sanitize",beforeRender:"beforeRender",styles:"styles",strict:"strict",scrollingContainer:"scrollingContainer",bounds:"bounds",customOptions:"customOptions",customModules:"customModules",trackChanges:"trackChanges",preserveWhitespace:"preserveWhitespace",classes:"classes",trimOnValidation:"trimOnValidation",linkPlaceholder:"linkPlaceholder",compareValues:"compareValues",filterNull:"filterNull",debounceTime:"debounceTime",defaultEmptyValue:"defaultEmptyValue",valueGetter:"valueGetter",valueSetter:"valueSetter"},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur",onNativeFocus:"onNativeFocus",onNativeBlur:"onNativeBlur"},features:[re]});let o=i;return o})(),Se=(()=>{let i=class i extends Lt{};i.\u0275fac=(()=>{let e;return function(n){return(e||(e=ze(i)))(n||i)}})(),i.\u0275cmp=w({type:i,selectors:[["quill-editor"]],standalone:!0,features:[Je([{multi:!0,provide:lt,useExisting:Ee(()=>i)},{multi:!0,provide:ct,useExisting:Ee(()=>i)}]),K,de],ngContentSelectors:At,decls:5,vars:2,consts:[["quill-editor-element",""]],template:function(t,n){t&1&&(Ge(Vt),M(0,qt,2,1),ae(1),ae(2,1),ae(3,2),M(4,jt,2,1)),t&2&&(J(0,n.toolbarPosition!=="top"?0:-1),m(4),J(4,n.toolbarPosition==="top"?4:-1))},dependencies:[F],styles:["[_nghost-%COMP%]{display:inline-block}"]});let o=i;return o})(),zt=(()=>{let i=class i{constructor(e,t){this.sanitizer=e,this.service=t,this.content="",this.innerHTML="",this.themeClass="ql-snow"}ngOnChanges(e){if(e.theme){let t=e.theme.currentValue||(this.service.config.theme?this.service.config.theme:"snow");this.themeClass=`ql-${t} ngx-quill-view-html`}else if(!this.theme){let t=this.service.config.theme?this.service.config.theme:"snow";this.themeClass=`ql-${t} ngx-quill-view-html`}if(e.content){let t=e.content.currentValue,n=[!0,!1].includes(this.sanitize)?this.sanitize:this.service.config.sanitize||!1;this.innerHTML=n?t:this.sanitizer.bypassSecurityTrustHtml(t)}}};i.\u0275fac=function(t){return new(t||i)(h(te),h(Te))},i.\u0275cmp=w({type:i,selectors:[["quill-view-html"]],inputs:{content:"content",theme:"theme",sanitize:"sanitize"},standalone:!0,features:[re,de],decls:2,vars:2,consts:[[1,"ql-container",3,"ngClass"],[1,"ql-editor",3,"innerHTML"]],template:function(t,n){t&1&&(a(0,"div",0),v(1,"div",1),l()),t&2&&(c("ngClass",n.themeClass),m(),c("innerHTML",n.innerHTML,B))},dependencies:[F,ce],styles:[`.ql-container.ngx-quill-view-html{border:0}
`],encapsulation:2});let o=i;return o})(),Ht=(()=>{let i=class i{constructor(e,t,n,r,d,g){this.elementRef=e,this.renderer=t,this.zone=n,this.service=r,this.domSanitizer=d,this.platformId=g,this.strict=!0,this.customModules=[],this.customOptions=[],this.preserveWhitespace=!1,this.onEditorCreated=new V,this.preserve=!1,this.quillSubscription=null,this.valueSetter=(b,y)=>{let S=ie(this.format,this.service.config.format),P=y;if(S==="text")b.setText(P);else{if(S==="html")([!0,!1].includes(this.sanitize)?this.sanitize:this.service.config.sanitize||!1)&&(y=this.domSanitizer.sanitize(be.HTML,y)),P=b.clipboard.convert(y);else if(S==="json")try{P=JSON.parse(y)}catch{P=[{insert:y}]}b.setContents(P)}}}ngOnInit(){this.preserve=this.preserveWhitespace}ngOnChanges(e){this.quillEditor&&e.content&&this.valueSetter(this.quillEditor,e.content.currentValue)}ngAfterViewInit(){Pe(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe(ve(e=>{let t=[this.service.registerCustomModules(e,this.customModules)],n=this.beforeRender??this.service.config.beforeRender;return n&&t.push(n()),Promise.all(t).then(()=>e)})).subscribe(e=>{let t=Object.assign({},this.modules||this.service.config.modules);t.toolbar=!1,this.customOptions.forEach(g=>{let b=e.import(g.import);b.whitelist=g.whitelist,e.register(b,!0)});let n=this.debug;!n&&n!==!1&&this.service.config.debug&&(n=this.service.config.debug);let r=this.formats;!r&&r===void 0&&(r=this.service.config.formats?Object.assign({},this.service.config.formats):this.service.config.formats===null?null:void 0);let d=this.theme||(this.service.config.theme?this.service.config.theme:"snow");this.editorElem=this.elementRef.nativeElement.querySelector("[quill-view-element]"),this.zone.runOutsideAngular(()=>{this.quillEditor=new e(this.editorElem,{debug:n,formats:r,modules:t,readOnly:!0,strict:this.strict,theme:d})}),this.renderer.addClass(this.editorElem,"ngx-quill-view"),this.content&&this.valueSetter(this.quillEditor,this.content),this.onEditorCreated.observers.length&&requestAnimationFrame(()=>{this.onEditorCreated.emit(this.quillEditor),this.onEditorCreated.complete()})}))}ngOnDestroy(){this.quillSubscription?.unsubscribe(),this.quillSubscription=null}};i.\u0275fac=function(t){return new(t||i)(h(Q),h(j),h(se),h(Te),h(te),h(we))},i.\u0275cmp=w({type:i,selectors:[["quill-view"]],inputs:{format:"format",theme:"theme",modules:"modules",debug:"debug",formats:"formats",sanitize:"sanitize",beforeRender:"beforeRender",strict:"strict",content:"content",customModules:"customModules",customOptions:"customOptions",preserveWhitespace:"preserveWhitespace"},outputs:{onEditorCreated:"onEditorCreated"},standalone:!0,features:[re,de],decls:2,vars:1,consts:[["quill-view-element",""]],template:function(t,n){t&1&&M(0,Ft,1,0,"pre",0)(1,Wt,1,0),t&2&&J(0,n.preserve?0:1)},dependencies:[F],styles:[`.ql-container.ngx-quill-view{border:0}
`],encapsulation:2});let o=i;return o})(),_t=(()=>{let i=class i{static forRoot(e){return{ngModule:i,providers:[{provide:Oe,useValue:e}]}}};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=$({type:i}),i.\u0275inj=G({imports:[Se,Ht,zt]});let o=i;return o})();var Gt=["editorContent"],$t=()=>({height:"200px"}),Qt=o=>({selected:o}),Bt=o=>({active:o});function Kt(o,i){if(o&1){let s=T();a(0,"div",6)(1,"div",7)(2,"quill-editor",8,0),Ke("ngModelChange",function(t){_(s);let n=C();return Be(n.editorHtml,t)||(n.editorHtml=t),E(t)}),f("onEditorCreated",function(t){_(s);let n=C();return E(n.onEditorCreated(t))}),l()(),v(4,"div",9,1),a(6,"div",10)(7,"button",11),f("click",function(){_(s);let t=C();return E(t.toggleEditorMode())}),u(8),l(),a(9,"button",11),f("click",function(){_(s);let t=C();return E(t.handleRemoveComponent())}),u(10,"DELETE"),l()()()}if(o&2){let s=C();c("ngClass",s.isInEditMode?"editable":""),m(),c("hidden",!s.isInEditMode),m(),c("styles",Xe(8,$t)),Qe("ngModel",s.editorHtml),m(2),c("hidden",s.isInEditMode)("id",s.elementId)("innerHTML",s.editorHtml,B),m(4),le(s.editorActionText)}}function Jt(o,i){if(o&1){let s=T();a(0,"div",19),f("click",function(){let t=_(s).$implicit,n=C(2);return E(n.handleImageClick(t))}),v(1,"img",20),l()}if(o&2){let s=i.$implicit,e=C(2);c("ngClass",ye(2,Qt,e.selectedImage===s)),m(),c("src",s,ee)}}function Xt(o,i){if(o&1){let s=T();a(0,"div",12)(1,"h3"),u(2,"Please choose image"),l(),a(3,"div",13)(4,"div",14)(5,"h4"),u(6,"Uploaded images"),l(),a(7,"div",15),M(8,Jt,2,4,"div",16),l(),a(9,"button",11),f("click",function(){_(s);let t=C();return E(t.expandImages())}),u(10,"More images"),l()(),a(11,"strong"),u(12,"OR"),l(),a(13,"div",17)(14,"input",18),f("change",function(t){_(s);let n=C();return E(n.onFileSelected(t))}),l()()()()}if(o&2){let s=C();m(8),c("ngForOf",s.displayedImages)}}function Zt(o,i){if(o&1){let s=T();a(0,"span",37),f("click",function(){let t=_(s).$implicit,n=C(2);return E(n.handleImageAllignmentChange(t))}),u(1),l()}if(o&2){let s=i.$implicit,e=i.index,t=C(2);c("ngClass",ye(2,Bt,t.imgWrapperProperties.justifyContent===s.justifyContent&&t.imgWrapperProperties.alignItems===s.alignItems)),m(),X(" ",t.getAllignmentDashes(e)," ")}}function Yt(o,i){if(o&1){let s=T();a(0,"div",21)(1,"div",22)(2,"button",23),f("click",function(){_(s);let t=C();return E(t.toggleImageViewerMode())}),u(3," PROPERTIES "),l(),a(4,"div",24),v(5,"img",25),a(6,"img",26),f("click",function(){_(s);let t=C();return E(t.toggleEditorMode())}),l(),a(7,"img",27),f("click",function(){_(s);let t=C();return E(t.handleRemoveComponent())}),l(),a(8,"img",28),f("click",function(){_(s);let t=C();return E(t.handleImgSave())}),l(),v(9,"div",29),l()(),a(10,"div",30)(11,"div",31)(12,"label",32),u(13),l(),a(14,"input",33),f("ngModelChange",function(t){_(s);let n=C();return E(n.handleImagePropertyChange(t,"maxWidth"))}),l()(),a(15,"div",31)(16,"label",32),u(17),l(),a(18,"input",33),f("ngModelChange",function(t){_(s);let n=C();return E(n.handleImagePropertyChange(t,"height"))}),l()(),a(19,"div",34)(20,"h4"),u(21,"Image Allignment"),l(),a(22,"div",35),M(23,Zt,2,4,"span",36),l()(),a(24,"div",34)(25,"button",11),f("click",function(){_(s);let t=C();return E(t.handleRemoveComponent())}),u(26,"Delete image"),l()()()()}if(o&2){let s=C();c("ngClass",s.isImageViewerExpanded?"properties-visible":""),m(),c("ngStyle",s.imgWrapperProperties),m(3),c("ngStyle",s.imagePropertiesStyle),m(),c("src",s.selectedImage,ee),m(8),X("Image width: ",s.imageProperties.maxWidth,""),m(),c("ngModel",s.imageProperties.maxWidth),m(3),X("Max height: ",s.imageProperties.height,""),m(),c("ngModel",s.imageProperties.height),m(5),c("ngForOf",s.imageAllignments)}}var p=function(o){return o.VIEW="VIEW",o.EDIT="EDIT",o.IMAGE_PICKER="IMAGE_PICKER",o.IMAGE_VIEWER="IMAGE_VIEWER",o.IMAGE_VIEWER_EXPANDED="IMAGE_VIEWER_EXPANDED",o}(p||{}),ue=(()=>{let i=class i{constructor(e,t){this.adminService=e,this.http=t,this.editorActionText="EDIT",this.editorState=p.VIEW,this.editorStatesAll=p,this.idPrefix="editor_id_",this.elementId="",this.removeComponent=new D,this.defaultMode=p.VIEW,this.editorHtml="",this.uploadedImages=[],this.displayedImages=[],this.displayedCountStep=4,this.numberOfExpansions=0,this.imageProperties={maxWidth:100,maxHeight:100,height:100},this.imagePropertiesStyle={maxWidth:"auto",maxHeight:"auto",height:"auto"},this.imgWrapperProperties={justifyContent:"center",alignItems:"center"},this.imageAllignments=[{justifyContent:"flex-start",alignItems:"flex-start"},{justifyContent:"center",alignItems:"flex-start"},{justifyContent:"flex-end",alignItems:"flex-start"},{justifyContent:"flex-start",alignItems:"center"},{justifyContent:"center",alignItems:"center"},{justifyContent:"flex-end",alignItems:"center"},{justifyContent:"flex-start",alignItems:"flex-end"},{justifyContent:"center",alignItems:"flex-end"},{justifyContent:"flex-end",alignItems:"flex-end"}]}ngOnInit(){this.metadata.crudMode=this.metadata.id?"update":"create",this.defaultMode=this.isText?this.metadata.id?p.VIEW:p.EDIT:this.metadata.imgUrl?p.IMAGE_VIEWER:p.IMAGE_PICKER,this.elementId=this.idPrefix+this.metadata.id,this.editorHtml=this.metadata.html,this.applyEditorMode(this.defaultMode,!0),this.isText||this.adminService.getUploadedImages().subscribe(e=>{this.uploadedImages=e.map(t=>"https://rockettt.rs/"+t),this.updateDisplayedUploadedImagesArray()})}ngAfterViewInit(){}applyEditorMode(e,t=!1){this.editorState=e,e===p.EDIT?this.editorActionText="SAVE":e===p.VIEW?(this.editorActionText="EDIT",this.isPostCreated&&!t&&this.metadata.id?this.updatePostContent().subscribe():this.isPostCreated&&!t&&!this.metadata.id&&this.addPostContent().subscribe()):e===p.IMAGE_PICKER||e===p.IMAGE_VIEWER&&(this.metadata.imgUrl&&(this.selectedImage=this.metadata.imgUrl),this.metadata.imgWrapperProperties&&(this.imgWrapperProperties=this.metadata.imgWrapperProperties,this.handleImageAllignmentChange(this.metadata.imgWrapperProperties)),this.metadata.imgProperties&&(this.handleImagePropertyChange(this.metadata.imgProperties.maxWidth,"maxWidth"),this.handleImagePropertyChange(this.metadata.imgProperties.height,"height")))}onEditorCreated(e){e.clipboard.dangerouslyPasteHTML(this.metadata.html)}toggleEditorMode(){this.editorState===p.EDIT||this.editorState===p.VIEW?this.editorState=this.editorState===p.VIEW?p.EDIT:p.VIEW:this.editorState=this.editorState===p.IMAGE_VIEWER||this.editorState===p.IMAGE_VIEWER_EXPANDED?p.IMAGE_PICKER:p.IMAGE_VIEWER,this.applyEditorMode(this.editorState),console.log(this.editorHtml)}toggleImageViewerMode(){this.editorState=this.editorState===p.IMAGE_VIEWER?p.IMAGE_VIEWER_EXPANDED:p.IMAGE_VIEWER}handleRemoveComponent(){this.removeComponent.next({id:this.metadata.id,serial:this.metadata.serial_number})}handleImageClick(e){this.moveImgToStart(e),this.updateDisplayedUploadedImagesArray(),this.applyEditorMode(p.IMAGE_VIEWER),this.selectedImage=e}updateDisplayedUploadedImagesArray(){this.displayedImages=this.uploadedImages.slice(0,this.displayedCountStep*(this.numberOfExpansions+1))}expandImages(){this.uploadedImages.length<=this.displayedImages.length&&alert("No more images to show"),this.numberOfExpansions++,this.updateDisplayedUploadedImagesArray()}moveImgToStart(e){let t=this.uploadedImages.findIndex(r=>r===e),[n]=this.uploadedImages.splice(t,1);this.uploadedImages.unshift(n)}handleImageAllignmentChange(e){this.imgWrapperProperties=e}handleImagePropertyChange(e,t){this.imageProperties[t]=e,this.imagePropertiesStyle[t]=this.imageProperties[t]+"%"}handleImgSave(){this.metadata.id?this.updatePostContent().subscribe():this.metadata.post_id&&this.addPostContent().subscribe()}onFileSelected(e){let t=e.target.files[0],n=new FormData;n.append("image",t,t.name),this.adminService.uploadImage(n).subscribe(r=>{this.uploadedImages.unshift("https://rockettt.rs/assets/uploads/"+r.name),this.updateDisplayedUploadedImagesArray()})}updatePostContent(){return console.log(this.metadata),this.adminService.updatePostContent(this.metadata.post_id,H(O({},this.metadata),{html:this.editorHtml,imgUrl:this.selectedImage,imgProperties:this.imageProperties,imgWrapperProperties:this.imgWrapperProperties}))}addPostContent(){return this.adminService.addPostContent(this.metadata.post_id,H(O({},this.metadata),{html:this.editorHtml,imgUrl:this.selectedImage,imgProperties:this.imageProperties,imgWrapperProperties:this.imgWrapperProperties})).pipe(We(e=>{console.log(e),this.metadata.id=e?.insertId}))}get isInEditMode(){return this.editorState===p.EDIT}get isImagePicker(){return this.editorState===p.IMAGE_PICKER}get isImageViewer(){return this.editorState===p.IMAGE_VIEWER||this.isImageViewerExpanded}get isImageViewerExpanded(){return this.editorState===p.IMAGE_VIEWER_EXPANDED}get isPostCreated(){return!!this.metadata.post_id}get isText(){return this.metadata.elementType==="text"}getAllignmentDashes(e){return[0,2,6,8].includes(e)?"- - -":[1,3,5,7].includes(e)?"- -":"-"}};i.\u0275fac=function(t){return new(t||i)(h(W),h(me))},i.\u0275cmp=w({type:i,selectors:[["app-editor"]],viewQuery:function(t,n){if(t&1&&N(Gt,5),t&2){let r;k(r=q())&&(n.editorContent=r.first)}},inputs:{metadata:"metadata",defaultMode:"defaultMode"},outputs:{removeComponent:"removeComponent"},decls:4,vars:3,consts:[["stupidEditor",""],["editorContent",""],[1,"editor-container"],["class","editor-wrapper",3,"ngClass",4,"ngIf"],["class","image-editor-content",4,"ngIf"],["class","image-view-mode",3,"ngClass",4,"ngIf"],[1,"editor-wrapper",3,"ngClass"],[1,"quill-wrapper",3,"hidden"],[3,"ngModelChange","onEditorCreated","styles","ngModel"],[1,"editor-content",3,"hidden","id","innerHTML"],[1,"actions"],[3,"click"],[1,"image-editor-content"],[1,"image-editor-wrapper"],[1,"uploaded-images-container"],[1,"uploaded-images-wrapper"],["class","uploaded-image",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"upload-image"],["type","file",3,"change"],[1,"uploaded-image",3,"click","ngClass"],["alt","",3,"src"],[1,"image-view-mode",3,"ngClass"],[1,"left-side",3,"ngStyle"],[1,"on-image-open-side-bar",3,"click"],[1,"image-wrapper",3,"ngStyle"],["alt","",1,"selected-img",3,"src"],["src","assets/image-editing.png",1,"on-image-action","img-edit",3,"click"],["src","assets/trash-bin.png",1,"on-image-action","img-delete",3,"click"],["src","assets/save.png",1,"on-image-action","img-save",3,"click"],[1,"gradient-overlay"],[1,"image-action-bar"],[1,"range-container","property-row"],["for","imageWidth"],["type","range","min","0","step","10","max","100",1,"styled-range",3,"ngModelChange","ngModel"],[1,"property-row"],[1,"image-allignment-buttons"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"click","ngClass"]],template:function(t,n){t&1&&(a(0,"div",2),M(1,Kt,11,9,"div",3)(2,Xt,15,1,"div",4)(3,Yt,27,9,"div",5),l()),t&2&&(m(),c("ngIf",n.isText),m(),c("ngIf",!n.isText&&n.isImagePicker),m(),c("ngIf",!n.isText&&n.isImageViewer))},dependencies:[ce,Z,et,tt,dt,ht,mt,pt,Se],styles:['.main-horizontal-padding[_ngcontent-%COMP%]{padding:0 12.8rem}.first-section[_ngcontent-%COMP%]{margin-top:150px}.w-1-1[_ngcontent-%COMP%]{width:100%!important}.w-1-2[_ngcontent-%COMP%]{width:50%!important}.w-1-3[_ngcontent-%COMP%]{width:33.3333333333%!important}.editor-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:start;align-items:center;flex-direction:row;gap:4.8rem;margin-bottom:3.2rem;color:#fff}.editor-wrapper.editable[_ngcontent-%COMP%]{justify-content:space-between;gap:1.6rem}.editor-wrapper[_ngcontent-%COMP%]   .editor-content.editable[_ngcontent-%COMP%]{background-color:#fff;padding:1.6rem;border:.2rem solid #ffed00;outline:none}.image-editor-content[_ngcontent-%COMP%]{margin-bottom:3.2rem}.image-editor-content[_ngcontent-%COMP%]   .image-editor-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:start;align-items:center;flex-direction:row;gap:3.2rem}.uploaded-images-container[_ngcontent-%COMP%]{text-align:center;width:80%}.uploaded-images-container[_ngcontent-%COMP%]   .uploaded-images-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;flex-direction:row;flex-wrap:wrap;gap:3.2rem;margin-bottom:3.2rem}.uploaded-images-container[_ngcontent-%COMP%]   .uploaded-images-wrapper[_ngcontent-%COMP%]   .uploaded-image[_ngcontent-%COMP%]{cursor:pointer;width:100px;height:100px;border-radius:10%;overflow:hidden}.uploaded-images-container[_ngcontent-%COMP%]   .uploaded-images-wrapper[_ngcontent-%COMP%]   .uploaded-image.selected[_ngcontent-%COMP%]{border:solid #ffed00}.uploaded-images-container[_ngcontent-%COMP%]   .uploaded-images-wrapper[_ngcontent-%COMP%]   .uploaded-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.image-view-mode[_ngcontent-%COMP%]{width:100%;position:relative;display:flex;justify-content:center;align-items:stretch;flex-direction:row}.image-view-mode.properties-visible[_ngcontent-%COMP%]   .left-side[_ngcontent-%COMP%]{width:80%}.image-view-mode.properties-visible[_ngcontent-%COMP%]   .image-action-bar[_ngcontent-%COMP%]{width:20%;padding:1.6rem}.image-view-mode.properties-visible[_ngcontent-%COMP%]   .image-action-bar[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]{display:block}.left-side[_ngcontent-%COMP%]{width:100%;display:flex;position:relative}.left-side[_ngcontent-%COMP%]   .on-image-open-side-bar[_ngcontent-%COMP%]{position:absolute;top:2%;right:0;transform:translateY(120%) translate(35%) rotate(90deg)}.left-side[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]{transition:all .5s ease-in-out;width:100%;border:.1rem solid #ffed00;position:relative;display:flex;justify-content:center;align-items:center;flex-direction:row;overflow:hidden}.left-side[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   .on-image-action[_ngcontent-%COMP%]{z-index:2;position:absolute;background-color:#ffed00;border-radius:15px;box-shadow:2px -1px 16px 12px #00000096;cursor:pointer;transition:all .5s ease-in-out}.left-side[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   .on-image-action.img-edit[_ngcontent-%COMP%]{top:1%;left:20px;width:50px;height:50px}.left-side[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   .on-image-action.img-delete[_ngcontent-%COMP%]{top:1%;left:80px;width:50px;height:50px;padding:5px}.left-side[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   .on-image-action.img-save[_ngcontent-%COMP%]{top:1%;left:140px;width:50px;height:50px;padding:5px}.left-side[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   .on-image-action[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.left-side[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   .gradient-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100px}.left-side[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   .gradient-overlay[_ngcontent-%COMP%]:before{transition:all .5s ease-in-out;content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(180deg,#00000080,#0000)}.left-side[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   .selected-img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.image-action-bar[_ngcontent-%COMP%]{width:0%;height:auto;overflow:hidden;transition:all .5s ease-in-out;border:.1rem solid #3b3b3b;display:flex;justify-content:flex-start;align-items:center;flex-direction:column}.image-action-bar[_ngcontent-%COMP%]   .testing[_ngcontent-%COMP%]{height:100%}.image-action-bar[_ngcontent-%COMP%]   .property-row[_ngcontent-%COMP%]{display:none;margin:0 auto;text-align:center;width:fit-content;margin-bottom:3.2rem}.image-action-bar[_ngcontent-%COMP%]   .styled-range[_ngcontent-%COMP%]{-webkit-appearance:none;width:100%;height:10px;background:#ffed00;border-radius:5px;outline:none;opacity:.8;transition:opacity .2s}.image-action-bar[_ngcontent-%COMP%]   .styled-range[_ngcontent-%COMP%]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:25px;height:25px;background:#fff;border-radius:50%;cursor:pointer}.image-action-bar[_ngcontent-%COMP%]   .image-allignment-buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-direction:row;flex-wrap:wrap}.image-action-bar[_ngcontent-%COMP%]   .image-allignment-buttons[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex-basis:calc((100% - 3.2rem) / 3);margin-bottom:1.6rem;border:.1rem solid #3b3b3b;cursor:pointer}.image-action-bar[_ngcontent-%COMP%]   .image-allignment-buttons[_ngcontent-%COMP%]   span.active[_ngcontent-%COMP%]{background-color:#ffed00;color:#000}.actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-direction:row;width:15%}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-shrink:1;display:inline-block;font-weight:700;font-size:1.8rem;line-height:2.459rem;width:min-content;cursor:pointer;padding:4% 8%}']});let o=i;return o})();var L=(()=>{let i=class i{constructor(){this.addElement=new D}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=R({token:i,factory:i.\u0275fac});let o=i;return o})();var Et=(()=>{let i=class i{constructor(e,t){this.elRef=e,this.renderer=t,this.hostElement=this.elRef.nativeElement,this.parentHostElement=this.hostElement.parentNode}ngOnInit(){this.renderer.setStyle(this.hostElement,"cursor","pointer"),this.wrapContent(),this.createIcon()}createIcon(){this.icon=this.renderer.createElement("span"),this.renderer.setStyle(this.hostElement,"position","relative"),this.renderer.setStyle(this.icon,"position","relative"),this.renderer.setStyle(this.icon,"left","30px"),this.renderer.setStyle(this.icon,"top","50%"),this.renderer.setStyle(this.icon,"fontSize","24px"),this.renderer.setStyle(this.icon,"align-self","center"),this.renderer.setStyle(this.icon,"cursor","pointer");let e=this.renderer.createText("EDIT");this.renderer.appendChild(this.icon,e),this.renderer.appendChild(this.contentWrapper,this.icon),this.renderer.listen(this.icon,"click",()=>this.toggleContentEditable())}wrapContent(){this.contentWrapper=this.renderer.createElement("div"),this.renderer.addClass(this.contentWrapper,"new-item-wrapper"),this.renderer.setStyle(this.contentWrapper,"display","flex"),this.renderer.setStyle(this.contentWrapper,"alignItems","center"),this.renderer.setStyle(this.contentWrapper,"justifyContent","flex-start"),this.renderer.insertBefore(this.parentHostElement,this.contentWrapper,this.hostElement),this.renderer.appendChild(this.contentWrapper,this.hostElement)}toggleContentEditable(){let e=this.hostElement.getAttribute("contentEditable")==="true";this.renderer.setAttribute(this.hostElement,"contentEditable",e?"false":"true"),e?this.renderer.removeClass(this.contentWrapper,"editable"):this.renderer.addClass(this.contentWrapper,"editable"),this.icon.childNodes[0].textContent=e?"EDIT":"SAVE",e||this.hostElement.focus()}focusOnElement(){this.hostElement.focus()}};i.\u0275fac=function(t){return new(t||i)(h(Q),h(j))},i.\u0275dir=oe({type:i,selectors:[["","appEditableNewsItem",""]],inputs:{options:"options"}});let o=i;return o})();var ge=(()=>{let i=class i{constructor(){this.placeholder="Unesi tekst ovde...",this.addElement=new D}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-new-element-base"]],outputs:{addElement:"addElement"},decls:2,vars:0,template:function(t,n){t&1&&(a(0,"p"),u(1,"new-element-base works!"),l())}});let o=i;return o})();var fe=(()=>{let i=class i{constructor(e){this.newElementService=e}addElement(){this.newElementService.addElement.next({elementType:this.elementType})}};i.\u0275fac=function(t){return new(t||i)(h(L))},i.\u0275cmp=w({type:i,selectors:[["app-new-element-wrapper"]],inputs:{elementName:"elementName",elementTag:"elementTag",elementType:"elementType",placeholder:"placeholder"},decls:2,vars:1,consts:[[1,"element-type","new-element-wrapper",3,"click"]],template:function(t,n){t&1&&(a(0,"button",0),f("click",function(){return n.addElement()}),u(1),l()),t&2&&(m(),X(" ",n.elementName,`
`))},styles:[".new-element-wrapper[_ngcontent-%COMP%]{width:200px;height:100%;text-align:center}"]});let o=i;return o})();var bt=(()=>{let i=class i extends ge{constructor(){super(),this.elementTag="p",this.elementName="Tekstualni editor",this.elementType="text"}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-new-element-paragraph"]],features:[K],decls:1,vars:4,consts:[[3,"elementName","elementTag","elementType","placeholder"]],template:function(t,n){t&1&&v(0,"app-new-element-wrapper",0),t&2&&c("elementName",n.elementName)("elementTag",n.elementTag)("elementType",n.elementType)("placeholder",n.placeholder)},dependencies:[fe]});let o=i;return o})();var yt=(()=>{let i=class i extends ge{constructor(){super(),this.elementTag="img",this.elementName="Slika",this.elementType="image"}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=w({type:i,selectors:[["app-new-element-image"]],features:[K],decls:1,vars:4,consts:[[3,"elementName","elementTag","elementType","placeholder"]],template:function(t,n){t&1&&v(0,"app-new-element-wrapper",0),t&2&&c("elementName",n.elementName)("elementTag",n.elementTag)("elementType",n.elementType)("placeholder",n.placeholder)},dependencies:[fe]});let o=i;return o})();var oi=["dialog"],xt=(()=>{let i=class i{constructor(e){this.newElementService=e,this.newElementService.addElement.subscribe(t=>this.onDialogClose(t))}openDialog(){this.dialog.nativeElement.showModal()}onDialogClose(e){this.dialog.nativeElement.close()}};i.\u0275fac=function(t){return new(t||i)(h(L))},i.\u0275cmp=w({type:i,selectors:[["app-new-item-adder"]],viewQuery:function(t,n){if(t&1&&N(oi,5),t&2){let r;k(r=q())&&(n.dialog=r.first)}},decls:12,vars:0,consts:[["dialog",""],[3,"click"],[1,"element-type-container"],[1,"dialog-actions"]],template:function(t,n){if(t&1){let r=T();a(0,"button",1),f("click",function(){return _(r),E(n.openDialog())}),u(1,"Dodaj Sadrzaj"),l(),a(2,"dialog",null,0)(4,"h2"),u(5,"Izaberi element"),l(),a(6,"div",2),v(7,"app-new-element-paragraph")(8,"app-new-element-image"),l(),a(9,"div",3)(10,"button",1),f("click",function(){_(r);let g=$e(3);return E(g.close())}),u(11,"Zatvori"),l()()()}},dependencies:[bt,yt],styles:[".main-horizontal-padding[_ngcontent-%COMP%]{padding:0 12.8rem}.first-section[_ngcontent-%COMP%]{margin-top:150px}.w-1-1[_ngcontent-%COMP%]{width:100%!important}.w-1-2[_ngcontent-%COMP%]{width:50%!important}.w-1-3[_ngcontent-%COMP%]{width:33.3333333333%!important}dialog[_ngcontent-%COMP%]{width:70%}.element-type-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:stretch;flex-direction:row;flex-wrap:wrap}.element-type-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{border:.2rem solid #ffed00;padding:1.6rem;margin-bottom:1.6rem;margin-right:1.6rem;cursor:pointer}.dialog-actions[_ngcontent-%COMP%]{margin-top:3.2rem}"]});let o=i;return o})();var si=["newsContent"],ai=["newItemAdderWrapper"],li=["postTitleRef"];function di(o,i){if(o&1){let s=T();a(0,"app-editor",10),f("removeComponent",function(t){_(s);let n=C();return E(n.handleRemoveComponent(t))}),l()}if(o&2){let s=i.$implicit,e=C();c("metadata",s)("defaultMode",e.defaultEditorMode)}}var Ae=(()=>{let i=class i{constructor(e,t,n,r,d,g,b){this.newElementService=e,this.renderer=t,this.cfr=n,this.appRef=r,this.adminService=d,this.router=g,this.activatedRoute=b,this.serial=0,this.postTitle="Naslov Vesti",this.postExists=!1,this.existingPost={},this.defaultEditorMode=p.VIEW,this.addedElements=[],this.newElementService.addElement.subscribe(y=>{console.log(this.existingPost.id),this.addedElements.push(O(H(O({},y),{serial_number:this.serial++,crudMode:"create"}),this.postExists&&{post_id:this.existingPost.id})),this.defaultEditorMode=y.elementType==="image"?p.IMAGE_PICKER:p.EDIT}),this.activatedRoute.paramMap.subscribe(y=>{let S=y.get("id");if(!S){this.postExists=!1;return}this.postExists=!0,this.adminService.getPostById(S).subscribe(P=>{this.existingPost=P,this.postTitle=P.title,this.addedElements=P.contents.map(I=>O({},I)),this.initTitle()})})}ngAfterViewInit(){this.postExists||this.initTitle()}handleRemoveComponent({id:e,serial:t}){if(e)this.adminService.deletePostcontent(e,this.existingPost.id).subscribe(()=>{this.addedElements=this.addedElements.filter(n=>n.id!==e)});else{let n=this.addedElements.findIndex(r=>r.serial_number===t);n!==-1&&this.addedElements.splice(n,1)}}handleTitleChange(e){this.postTitle=this.postTitleRef.nativeElement.innerText}initTitle(){this.postTitleRef.nativeElement.innerText=this.postTitle}saveItems(){console.log(this.editorComponents);let e=[];e=this.editorComponents.map(n=>O(O(O(O({id:n.metadata.id,serial_number:n.metadata.serial_number,elementType:n.metadata.elementType,crudMode:n.metadata.crudMode},n.metadata.elementType==="text"&&{html:n.editorHtml}),n.metadata.elementType==="image"&&{imgUrl:n.selectedImage}),n.metadata.elementType==="image"&&{imgProperties:n.imageProperties}),n.metadata.elementType==="image"&&{imgWrapperProperties:n.imgWrapperProperties}));let t={contents:e,title:this.postTitle};this.postExists?(t.id=this.existingPost.id,this.adminService.updatePost(t).subscribe(n=>{this.router.navigate(["admin"])})):this.adminService.addPost(t).subscribe(n=>{this.router.navigate(["admin"])})}};i.\u0275fac=function(t){return new(t||i)(h(L),h(j),h(Ue),h(Ze),h(W),h(Y),h(rt))},i.\u0275cmp=w({type:i,selectors:[["app-news-builder"]],viewQuery:function(t,n){if(t&1&&(N(si,7),N(ai,5),N(li,5),N(ue,5)),t&2){let r;k(r=q())&&(n.newsContent=r.first),k(r=q())&&(n.newItemAdderWrapper=r.first),k(r=q())&&(n.postTitleRef=r.first),k(r=q())&&(n.editorComponents=r)}},decls:13,vars:1,consts:[["postTitleRef",""],["newsContent",""],["newItemAdderWrapper",""],[1,"news-builder-section","first-section"],[1,"news-header"],["appEditableNewsItem","",3,"input"],[1,"news-content"],["class","builder-row",3,"metadata","defaultMode","removeComponent",4,"ngFor","ngForOf"],[1,"action-bar","builder-row"],[3,"click"],[1,"builder-row",3,"removeComponent","metadata","defaultMode"]],template:function(t,n){if(t&1){let r=T();v(0,"app-navigation"),a(1,"section",3)(2,"div",4)(3,"h1",5,0),f("input",function(g){return _(r),E(n.handleTitleChange(g))}),l()(),a(5,"div",6,1),M(7,di,1,2,"app-editor",7),a(8,"div",8,2),v(10,"app-new-item-adder"),a(11,"button",9),f("click",function(){return _(r),E(n.saveItems())}),u(12,"Sacuvaj Novost"),l()()()()}t&2&&(m(7),c("ngForOf",n.addedElements))},dependencies:[pe,Z,Et,xt,ue],styles:[".main-horizontal-padding[_ngcontent-%COMP%]{padding:0 12.8rem}.first-section[_ngcontent-%COMP%]{margin-top:150px}.w-1-1[_ngcontent-%COMP%]{width:100%!important}.w-1-2[_ngcontent-%COMP%]{width:50%!important}.w-1-3[_ngcontent-%COMP%]{width:33.3333333333%!important}.news-builder-section[_ngcontent-%COMP%]   .news-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-direction:row;padding-bottom:1.6rem;margin-bottom:30px;border-bottom:.2rem solid white}.news-builder-section[_ngcontent-%COMP%]   .news-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.builder-row[_ngcontent-%COMP%]{display:block;margin-bottom:3.2rem}.thumbnail[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px;object-fit:cover}.action-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:3.2rem}",".main-horizontal-padding[_ngcontent-%COMP%]{padding:0 12.8rem}.first-section[_ngcontent-%COMP%]{margin-top:150px}.w-1-1[_ngcontent-%COMP%]{width:100%!important}.w-1-2[_ngcontent-%COMP%]{width:50%!important}.w-1-3[_ngcontent-%COMP%]{width:33.3333333333%!important}.new-item-wrapper.editable[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{all:unset;min-width:80%;background-color:#fff;color:#000;padding:.8rem}"]});let o=i;return o})();var Pt=(()=>{let i=class i{constructor(e){this.notificationService=e}intercept(e,t){return console.log("INtercept start"),this.notificationService.showHideModal.next(!0),t.handle(e).pipe(De(n=>{if(n instanceof it){let r=n.clone({body:n.body.data}),d=n.body,g=d.data;return d.success?this.notificationService.showNotification.next({type:"success",message:g.message||"Success"}):d.success||this.notificationService.showNotification.next({type:"error",message:g.message||"Error"}),r}return n}),je(()=>{console.log("Intercept end"),this.notificationService.showHideModal.next(!1)}))}};i.\u0275fac=function(t){return new(t||i)(U(at))},i.\u0275prov=R({token:i,factory:i.\u0275fac});let o=i;return o})();var Mt=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=$({type:i}),i.\u0275inj=G({providers:[W,{provide:nt,useClass:Pt,multi:!0}],imports:[F,ot]});let o=i;return o})();var Mn=(()=>{let i=class i{};i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=$({type:i}),i.\u0275inj=G({providers:[L],imports:[st.forChild([{path:"",component:vt},{path:"news-generator",component:Ae},{path:"news-generator/:id",component:Ae}]),gt,F,ut,Mt,_t.forRoot({theme:"snow"})]});let o=i;return o})();export{Mn as AdminPanelModule};
