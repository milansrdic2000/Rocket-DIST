import{$ as w,A as ke,B as Le,C as $,D as S,Da as k,E as Ee,Ea as ye,Fa as Ke,G as we,Ga as de,H as U,Ha as Ze,I as Re,Ia as Xe,J as g,K as c,M as Ae,Na as ee,O as D,P as re,Pa as Ye,Q as G,R as T,Ra as X,S as h,T as J,Ta as et,U as l,V as a,W as m,Ya as ce,Z as q,_ as C,a as Pe,aa as ze,ab as tt,b as W,ba as se,c as qe,ca as N,cb as it,d as Ne,da as V,e as Ve,ea as F,f as ge,fa as u,fb as nt,g as Fe,ga as K,h as ie,hb as ot,i as ve,ia as He,ja as We,ka as Qe,l as je,la as Be,ma as le,mb as rt,n as Ce,na as $e,o as j,p as Q,q as De,r as Y,s as P,ta as Ue,u as f,ua as Ge,v as B,va as be,w as ne,x as oe,xa as ae,y as M,ya as Z,z as x,za as Je,zb as st}from"./chunk-TNQCCDTU.js";import{a as z,b as H,g as fe}from"./chunk-MON7YFGF.js";var L=(()=>{let i=class i{constructor(t){this.http=t,this.SERVER_URL="http://localhost:3000",this.BASE_API_PATH="/api/admin",this.FULL_API_PATH=`${this.SERVER_URL}${this.BASE_API_PATH}`}addPost(t){return this.http.post(`${this.FULL_API_PATH}/posts`,t)}getAllPosts(){return this.http.get(`${this.FULL_API_PATH}/posts`)}getPostById(t){return this.http.get(`${this.FULL_API_PATH}/posts/${t}`)}updatePost(t){return this.http.put(`${this.FULL_API_PATH}/posts/${t.id}`,t)}updatePostContent(t,e){return this.http.put(`${this.FULL_API_PATH}/posts/${t}/content/${e.id}`,e)}uploadImage(t){return this.http.post(`${this.FULL_API_PATH}/upload`,t)}getUploadedImages(){return this.http.get(`${this.FULL_API_PATH}/uploads`)}};i.\u0275fac=function(e){return new(e||i)(Y(de))},i.\u0275prov=j({token:i,factory:i.\u0275fac});let o=i;return o})();var at=(()=>{let i=class i{constructor(t){this.router=t}editPost(){this.router.navigate(["admin/news-generator",this.id])}};i.\u0275fac=function(e){return new(e||i)(c(X))},i.\u0275cmp=f({type:i,selectors:[["app-admin-news-list-item"]],inputs:{id:"id",title:"title",shortDescription:"shortDescription"},decls:8,vars:2,consts:[[1,"short-description",3,"innerHtml"],[1,"action-bar"],[1,"",3,"click"],[1,""]],template:function(e,n){e&1&&(l(0,"h3"),u(1),a(),m(2,"div",0),l(3,"div",1)(4,"button",2),C("click",function(){return n.editPost()}),u(5,"Izmeni"),a(),l(6,"button",3),u(7,"Obri\u0161i"),a()()),e&2&&(g(),K(n.title),g(),h("innerHtml",n.shortDescription,U))},styles:[".main-horizontal-padding[_ngcontent-%COMP%]{padding:0 12.8rem}.first-section[_ngcontent-%COMP%]{margin-top:150px}.w-1-1[_ngcontent-%COMP%]{width:100%!important}.w-1-2[_ngcontent-%COMP%]{width:50%!important}.w-1-3[_ngcontent-%COMP%]{width:33.3333333333%!important}.action-bar[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;flex-direction:row;gap:1.6rem}"]});let o=i;return o})();function bt(o,i){if(o&1&&(l(0,"li"),m(1,"app-admin-news-list-item",7),a()),o&2){let d=i.$implicit;g(),h("id",d.id)("title",d.title)("shortDescription",d.shortDescription)}}var dt=(()=>{let i=class i{constructor(t,e){this.router=t,this.adminService=e,this.posts=[]}ngOnInit(){this.getAllNews()}getAllNews(){this.adminService.getAllPosts().subscribe(t=>{this.posts=t.map(e=>{let n=e.contents.find(r=>r.elementType==="text").html;return H(z({},e),{shortDescription:n})}),console.log(this.posts)})}addNews(){this.router.navigate(["admin/news-generator"])}};i.\u0275fac=function(e){return new(e||i)(c(X),c(L))},i.\u0275cmp=f({type:i,selectors:[["app-admin-panel"]],decls:14,vars:1,consts:[[1,"news-control-section","first-section"],[1,"news-control-container"],[1,"news-control-header"],[1,"news-control-content"],[4,"ngFor","ngForOf"],[1,"action-bar"],[3,"click"],[3,"id","title","shortDescription"]],template:function(e,n){e&1&&(m(0,"app-navigation"),l(1,"section",0)(2,"h1"),u(3,"Admin panel"),a(),l(4,"div",1)(5,"div",2)(6,"h2"),u(7,"Vesti"),a()(),l(8,"div",3)(9,"ul"),T(10,bt,2,3,"li",4),a(),l(11,"div",5)(12,"button",6),C("click",function(){return n.addNews()}),u(13,"Dodaj Clanak"),a()()()()()),e&2&&(g(10),h("ngForOf",n.posts))},dependencies:[ce,Z,at],styles:[".main-horizontal-padding[_ngcontent-%COMP%]{padding:0 12.8rem}.first-section[_ngcontent-%COMP%]{margin-top:150px}.w-1-1[_ngcontent-%COMP%]{width:100%!important}.w-1-2[_ngcontent-%COMP%]{width:50%!important}.w-1-3[_ngcontent-%COMP%]{width:33.3333333333%!important}.news-control-content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-bottom:.2rem solid white;padding:1.6rem 0}.action-bar[_ngcontent-%COMP%]{margin-top:1.6rem}"]});let o=i;return o})();var me={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},xe=new De("config",{providedIn:"root",factory:()=>({modules:me})});var yt=[[["","above-quill-editor-toolbar",""]],[["","quill-editor-toolbar",""]],[["","below-quill-editor-toolbar",""]]],_t=["[above-quill-editor-toolbar]","[quill-editor-toolbar]","[below-quill-editor-toolbar]"];function Mt(o,i){o&1&&m(0,"pre",0)}function xt(o,i){o&1&&m(0,"div",0)}function Tt(o,i){if(o&1&&T(0,Mt,1,0,"pre",0)(1,xt,1,0),o&2){let d=w();J(0,d.preserve?0:1)}}function Ot(o,i){o&1&&m(0,"pre",0)}function It(o,i){o&1&&m(0,"div",0)}function St(o,i){if(o&1&&T(0,Ot,1,0,"pre",0)(1,It,1,0),o&2){let d=w();J(0,d.preserve?0:1)}}function Pt(o,i){o&1&&m(0,"pre",0)}function qt(o,i){o&1&&m(0,"div",0)}var te=(o,i)=>o||i||"html",Te=(()=>{let i=class i{constructor(t,e){this.config=e,this.quill$=Fe(()=>fe(this,null,function*(){if(!this.Quill){let n=this.document.addEventListener;this.document.addEventListener=this.document.__zone_symbol__addEventListener||this.document.addEventListener;let r=yield import("./chunk-YFZ444RX.js");this.document.addEventListener=n,this.Quill=r.default?.default??r.default??r}return this.config.customOptions?.forEach(n=>{let r=this.Quill.import(n.import);r.whitelist=n.whitelist,this.Quill.register(r,!0,this.config.suppressGlobalRegisterWarning)}),yield this.registerCustomModules(this.Quill,this.config.customModules,this.config.suppressGlobalRegisterWarning)})).pipe(je({bufferSize:1,refCount:!0})),this.document=t.get(be),this.config||(this.config={modules:me})}getQuill(){return this.quill$}registerCustomModules(t,e,n){return fe(this,null,function*(){if(Array.isArray(e))for(let{implementation:r,path:s}of e)qe(r)&&(r=yield Ne(r)),t.register(s,r,n);return t})}};i.\u0275fac=function(e){return new(e||i)(Y(Le),Y(xe,8))},i.\u0275prov=j({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})(),Nt=(()=>{let i=class i{constructor(){this.required=!1,this.customToolbarPosition="top",this.styles=null,this.strict=!0,this.customOptions=[],this.customModules=[],this.preserveWhitespace=!1,this.trimOnValidation=!1,this.compareValues=!1,this.filterNull=!1,this.defaultEmptyValue=null,this.onEditorCreated=new S,this.onEditorChanged=new S,this.onContentChanged=new S,this.onSelectionChanged=new S,this.onFocus=new S,this.onBlur=new S,this.onNativeFocus=new S,this.onNativeBlur=new S,this.disabled=!1,this.preserve=!1,this.toolbarPosition="top",this.subscription=null,this.quillSubscription=null,this.elementRef=P($),this.document=P(be),this.cd=P(Ge),this.domSanitizer=P(ee),this.platformId=P(Ee),this.renderer=P(D),this.zone=P(re),this.service=P(Te),this.valueGetter=(t,e)=>{let n=e.querySelector(".ql-editor").innerHTML;(n==="<p><br></p>"||n==="<div><br></div>")&&(n=this.defaultEmptyValue);let r=n,s=te(this.format,this.service.config.format);if(s==="text")r=t.getText();else if(s==="object")r=t.getContents();else if(s==="json")try{r=JSON.stringify(t.getContents())}catch{r=t.getText()}return r},this.valueSetter=(t,e)=>{let n=te(this.format,this.service.config.format);if(n==="html")return([!0,!1].includes(this.sanitize)?this.sanitize:this.service.config.sanitize||!1)&&(e=this.domSanitizer.sanitize(we.HTML,e)),t.clipboard.convert(e);if(n==="json")try{return JSON.parse(e)}catch{return[{insert:e}]}return e},this.selectionChangeHandler=(t,e,n)=>{let r=this.trackChanges||this.service.config.trackChanges,s=!t&&!!this.onModelTouched&&(n==="user"||r&&r==="all");!this.onBlur.observed&&!this.onFocus.observed&&!this.onSelectionChanged.observed&&!s||this.zone.run(()=>{t===null?this.onBlur.emit({editor:this.quillEditor,source:n}):e===null&&this.onFocus.emit({editor:this.quillEditor,source:n}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:e,range:t,source:n}),s&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(t,e,n)=>{let r=this.quillEditor.getText(),s=this.quillEditor.getContents(),p=this.editorElem.querySelector(".ql-editor").innerHTML;(p==="<p><br></p>"||p==="<div><br></div>")&&(p=this.defaultEmptyValue);let v=this.trackChanges||this.service.config.trackChanges,E=(n==="user"||v&&v==="all")&&!!this.onModelChange;!this.onContentChanged.observed&&!E||this.zone.run(()=>{E&&this.onModelChange(this.valueGetter(this.quillEditor,this.editorElem)),this.onContentChanged.emit({content:s,delta:t,editor:this.quillEditor,html:p,oldDelta:e,source:n,text:r}),this.cd.markForCheck()})},this.editorChangeHandler=(t,e,n,r)=>{if(this.onEditorChanged.observed)if(t==="text-change"){let s=this.quillEditor.getText(),p=this.quillEditor.getContents(),v=this.editorElem.querySelector(".ql-editor").innerHTML;(v==="<p><br></p>"||v==="<div><br></div>")&&(v=this.defaultEmptyValue),this.zone.run(()=>{this.onEditorChanged.emit({content:p,delta:e,editor:this.quillEditor,event:t,html:v,oldDelta:n,source:r,text:s}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:t,oldRange:n,range:e,source:r}),this.cd.markForCheck()})}}static normalizeClassNames(t){return t.trim().split(" ").reduce((n,r)=>{let s=r.trim();return s&&n.push(s),n},[])}ngOnInit(){this.preserve=this.preserveWhitespace,this.toolbarPosition=this.customToolbarPosition}ngAfterViewInit(){ye(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe(ge(t=>{let e=[this.service.registerCustomModules(t,this.customModules)],n=this.beforeRender??this.service.config.beforeRender;return n&&e.push(n()),Promise.all(e).then(()=>t)})).subscribe(t=>{this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");let e=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),n=Object.assign({},this.modules||this.service.config.modules);e?n.toolbar=e:n.toolbar===void 0&&(n.toolbar=me.toolbar);let r=this.placeholder!==void 0?this.placeholder:this.service.config.placeholder;r===void 0&&(r="Insert text here ..."),this.styles&&Object.keys(this.styles).forEach(_=>{this.renderer.setStyle(this.editorElem,_,this.styles[_])}),this.classes&&this.addClasses(this.classes),this.customOptions.forEach(_=>{let A=t.import(_.import);A.whitelist=_.whitelist,t.register(A,!0)});let s=this.bounds&&this.bounds==="self"?this.editorElem:this.bounds;s||(s=this.service.config.bounds?this.service.config.bounds:this.document.body);let p=this.debug;!p&&p!==!1&&this.service.config.debug&&(p=this.service.config.debug);let v=this.readOnly;!v&&this.readOnly!==!1&&(v=this.service.config.readOnly!==void 0?this.service.config.readOnly:!1);let E=this.defaultEmptyValue;this.service.config.hasOwnProperty("defaultEmptyValue")&&(E=this.service.config.defaultEmptyValue);let I=this.scrollingContainer;!I&&this.scrollingContainer!==null&&(I=this.service.config.scrollingContainer===null||this.service.config.scrollingContainer?this.service.config.scrollingContainer:null);let y=this.formats;if(!y&&y===void 0&&(y=this.service.config.formats?[...this.service.config.formats]:this.service.config.formats===null?null:void 0),this.zone.runOutsideAngular(()=>{if(this.quillEditor=new t(this.editorElem,{bounds:s,debug:p,formats:y,modules:n,placeholder:r,readOnly:v,defaultEmptyValue:E,scrollingContainer:I,strict:this.strict,theme:this.theme||(this.service.config.theme?this.service.config.theme:"snow")}),this.onNativeBlur.observed&&(this.quillEditor.scroll.domNode.addEventListener("blur",()=>this.onNativeBlur.next({editor:this.quillEditor,source:"dom"})),this.quillEditor.getModule("toolbar").container.addEventListener("mousedown",_=>_.preventDefault())),this.onNativeFocus.observed&&this.quillEditor.scroll.domNode.addEventListener("focus",()=>this.onNativeFocus.next({editor:this.quillEditor,source:"dom"})),this.linkPlaceholder){let A=this.quillEditor?.theme?.tooltip?.root?.querySelector("input[data-link]");A?.dataset&&(A.dataset.link=this.linkPlaceholder)}}),this.content){if(te(this.format,this.service.config.format)==="text")this.quillEditor.setText(this.content,"silent");else{let A=this.valueSetter(this.quillEditor,this.content);this.quillEditor.setContents(A,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),!(!this.onEditorCreated.observed&&!this.onValidatorChanged)&&requestAnimationFrame(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor),this.onEditorCreated.complete()})}))}ngOnDestroy(){this.dispose(),this.quillSubscription?.unsubscribe(),this.quillSubscription=null}ngOnChanges(t){if(this.quillEditor){if(t.readOnly&&this.quillEditor.enable(!t.readOnly.currentValue),t.placeholder&&(this.quillEditor.root.dataset.placeholder=t.placeholder.currentValue),t.defaultEmptyValue&&(this.quillEditor.root.dataset.defaultEmptyValue=t.defaultEmptyValue.currentValue),t.styles){let e=t.styles.currentValue,n=t.styles.previousValue;n&&Object.keys(n).forEach(r=>{this.renderer.removeStyle(this.editorElem,r)}),e&&Object.keys(e).forEach(r=>{this.renderer.setStyle(this.editorElem,r,this.styles[r])})}if(t.classes){let e=t.classes.currentValue,n=t.classes.previousValue;n&&this.removeClasses(n),e&&this.addClasses(e)}t.debounceTime&&this.addQuillEventListeners()}}addClasses(t){i.normalizeClassNames(t).forEach(e=>{this.renderer.addClass(this.editorElem,e)})}removeClasses(t){i.normalizeClassNames(t).forEach(e=>{this.renderer.removeClass(this.editorElem,e)})}writeValue(t){if(this.filterNull&&t===null||(this.content=t,!this.quillEditor))return;let e=te(this.format,this.service.config.format),n=this.valueSetter(this.quillEditor,t);if(this.compareValues){let r=this.quillEditor.getContents();if(JSON.stringify(r)===JSON.stringify(n))return}if(t){e==="text"?this.quillEditor.setText(t):this.quillEditor.setContents(n);return}this.quillEditor.setText("")}setDisabledState(t=this.disabled){this.disabled=t,this.quillEditor&&(t?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}registerOnValidatorChange(t){this.onValidatorChanged=t}validate(){if(!this.quillEditor)return null;let t={},e=!0,n=this.quillEditor.getText(),r=this.trimOnValidation?n.trim().length:n.length===1&&n.trim().length===0?0:n.length-1,s=this.quillEditor.getContents().ops,p=s&&s.length===1&&[`
`,""].includes(s[0].insert);return this.minLength&&r&&r<this.minLength&&(t.minLengthError={given:r,minLength:this.minLength},e=!1),this.maxLength&&r>this.maxLength&&(t.maxLengthError={given:r,maxLength:this.maxLength},e=!1),this.required&&!r&&p&&(t.requiredError={empty:!0},e=!1),e?null:t}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.subscription=new Pe,this.subscription.add(ie(this.quillEditor,"selection-change").subscribe(([n,r,s])=>{this.selectionChangeHandler(n,r,s)}));let t=ie(this.quillEditor,"text-change"),e=ie(this.quillEditor,"editor-change");typeof this.debounceTime=="number"&&(t=t.pipe(ve(this.debounceTime)),e=e.pipe(ve(this.debounceTime))),this.subscription.add(t.subscribe(([n,r,s])=>{this.textChangeHandler(n,r,s)})),this.subscription.add(e.subscribe(([n,r,s,p])=>{this.editorChangeHandler(n,r,s,p)}))})}dispose(){this.subscription!==null&&(this.subscription.unsubscribe(),this.subscription=null)}};i.\u0275fac=function(e){return new(e||i)},i.\u0275dir=ne({type:i,inputs:{format:"format",theme:"theme",modules:"modules",debug:"debug",readOnly:"readOnly",placeholder:"placeholder",maxLength:"maxLength",minLength:"minLength",required:"required",formats:"formats",customToolbarPosition:"customToolbarPosition",sanitize:"sanitize",beforeRender:"beforeRender",styles:"styles",strict:"strict",scrollingContainer:"scrollingContainer",bounds:"bounds",customOptions:"customOptions",customModules:"customModules",trackChanges:"trackChanges",preserveWhitespace:"preserveWhitespace",classes:"classes",trimOnValidation:"trimOnValidation",linkPlaceholder:"linkPlaceholder",compareValues:"compareValues",filterNull:"filterNull",debounceTime:"debounceTime",defaultEmptyValue:"defaultEmptyValue",valueGetter:"valueGetter",valueSetter:"valueSetter"},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur",onNativeFocus:"onNativeFocus",onNativeBlur:"onNativeBlur"},features:[oe]});let o=i;return o})(),Oe=(()=>{let i=class i extends Nt{};i.\u0275fac=(()=>{let t;return function(n){return(t||(t=ke(i)))(n||i)}})(),i.\u0275cmp=f({type:i,selectors:[["quill-editor"]],standalone:!0,features:[Be([{multi:!0,provide:tt,useExisting:Ce(()=>i)},{multi:!0,provide:it,useExisting:Ce(()=>i)}]),G,le],ngContentSelectors:_t,decls:5,vars:2,consts:[["quill-editor-element",""]],template:function(e,n){e&1&&(ze(yt),T(0,Tt,2,1),se(1),se(2,1),se(3,2),T(4,St,2,1)),e&2&&(J(0,n.toolbarPosition!=="top"?0:-1),g(4),J(4,n.toolbarPosition==="top"?4:-1))},dependencies:[k],styles:["[_nghost-%COMP%]{display:inline-block}"]});let o=i;return o})(),Vt=(()=>{let i=class i{constructor(t,e){this.sanitizer=t,this.service=e,this.content="",this.innerHTML="",this.themeClass="ql-snow"}ngOnChanges(t){if(t.theme){let e=t.theme.currentValue||(this.service.config.theme?this.service.config.theme:"snow");this.themeClass=`ql-${e} ngx-quill-view-html`}else if(!this.theme){let e=this.service.config.theme?this.service.config.theme:"snow";this.themeClass=`ql-${e} ngx-quill-view-html`}if(t.content){let e=t.content.currentValue,n=[!0,!1].includes(this.sanitize)?this.sanitize:this.service.config.sanitize||!1;this.innerHTML=n?e:this.sanitizer.bypassSecurityTrustHtml(e)}}};i.\u0275fac=function(e){return new(e||i)(c(ee),c(Te))},i.\u0275cmp=f({type:i,selectors:[["quill-view-html"]],inputs:{content:"content",theme:"theme",sanitize:"sanitize"},standalone:!0,features:[oe,le],decls:2,vars:2,consts:[[1,"ql-container",3,"ngClass"],[1,"ql-editor",3,"innerHTML"]],template:function(e,n){e&1&&(l(0,"div",0),m(1,"div",1),a()),e&2&&(h("ngClass",n.themeClass),g(),h("innerHTML",n.innerHTML,U))},dependencies:[k,ae],styles:[`.ql-container.ngx-quill-view-html{border:0}
`],encapsulation:2});let o=i;return o})(),Ft=(()=>{let i=class i{constructor(t,e,n,r,s,p){this.elementRef=t,this.renderer=e,this.zone=n,this.service=r,this.domSanitizer=s,this.platformId=p,this.strict=!0,this.customModules=[],this.customOptions=[],this.preserveWhitespace=!1,this.onEditorCreated=new S,this.preserve=!1,this.quillSubscription=null,this.valueSetter=(v,E)=>{let I=te(this.format,this.service.config.format),y=E;if(I==="text")v.setText(y);else{if(I==="html")([!0,!1].includes(this.sanitize)?this.sanitize:this.service.config.sanitize||!1)&&(E=this.domSanitizer.sanitize(we.HTML,E)),y=v.clipboard.convert(E);else if(I==="json")try{y=JSON.parse(E)}catch{y=[{insert:E}]}v.setContents(y)}}}ngOnInit(){this.preserve=this.preserveWhitespace}ngOnChanges(t){this.quillEditor&&t.content&&this.valueSetter(this.quillEditor,t.content.currentValue)}ngAfterViewInit(){ye(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe(ge(t=>{let e=[this.service.registerCustomModules(t,this.customModules)],n=this.beforeRender??this.service.config.beforeRender;return n&&e.push(n()),Promise.all(e).then(()=>t)})).subscribe(t=>{let e=Object.assign({},this.modules||this.service.config.modules);e.toolbar=!1,this.customOptions.forEach(p=>{let v=t.import(p.import);v.whitelist=p.whitelist,t.register(v,!0)});let n=this.debug;!n&&n!==!1&&this.service.config.debug&&(n=this.service.config.debug);let r=this.formats;!r&&r===void 0&&(r=this.service.config.formats?Object.assign({},this.service.config.formats):this.service.config.formats===null?null:void 0);let s=this.theme||(this.service.config.theme?this.service.config.theme:"snow");this.editorElem=this.elementRef.nativeElement.querySelector("[quill-view-element]"),this.zone.runOutsideAngular(()=>{this.quillEditor=new t(this.editorElem,{debug:n,formats:r,modules:e,readOnly:!0,strict:this.strict,theme:s})}),this.renderer.addClass(this.editorElem,"ngx-quill-view"),this.content&&this.valueSetter(this.quillEditor,this.content),this.onEditorCreated.observers.length&&requestAnimationFrame(()=>{this.onEditorCreated.emit(this.quillEditor),this.onEditorCreated.complete()})}))}ngOnDestroy(){this.quillSubscription?.unsubscribe(),this.quillSubscription=null}};i.\u0275fac=function(e){return new(e||i)(c($),c(D),c(re),c(Te),c(ee),c(Ee))},i.\u0275cmp=f({type:i,selectors:[["quill-view"]],inputs:{format:"format",theme:"theme",modules:"modules",debug:"debug",formats:"formats",sanitize:"sanitize",beforeRender:"beforeRender",strict:"strict",content:"content",customModules:"customModules",customOptions:"customOptions",preserveWhitespace:"preserveWhitespace"},outputs:{onEditorCreated:"onEditorCreated"},standalone:!0,features:[oe,le],decls:2,vars:1,consts:[["quill-view-element",""]],template:function(e,n){e&1&&T(0,Pt,1,0,"pre",0)(1,qt,1,0),e&2&&J(0,n.preserve?0:1)},dependencies:[k],styles:[`.ql-container.ngx-quill-view{border:0}
`],encapsulation:2});let o=i;return o})(),ct=(()=>{let i=class i{static forRoot(t){return{ngModule:i,providers:[{provide:xe,useValue:t}]}}};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=B({type:i}),i.\u0275inj=Q({imports:[Oe,Ft,Vt]});let o=i;return o})();var Dt=["editorContent"],kt=()=>({height:"200px"});function Lt(o,i){if(o&1){let d=q();l(0,"div",5)(1,"div",6)(2,"quill-editor",7,0),Qe("ngModelChange",function(e){M(d);let n=w();return We(n.editorHtml,e)||(n.editorHtml=e),x(e)}),C("onEditorCreated",function(e){M(d);let n=w();return x(n.onEditorCreated(e))}),a()(),m(4,"div",8,1),l(6,"div",9)(7,"button",10),C("click",function(){M(d);let e=w();return x(e.toggleEditorMode())}),u(8),a(),l(9,"button",10),C("click",function(){M(d);let e=w();return x(e.handleRemoveComponent())}),u(10,"DELETE"),a()()()}if(o&2){let d=w();h("ngClass",d.isInEditMode?"editable":""),g(),h("hidden",!d.isInEditMode),g(),h("styles",$e(8,kt)),He("ngModel",d.editorHtml),g(2),h("hidden",d.isInEditMode)("id",d.elementId)("innerHTML",d.editorHtml,U),g(4),K(d.editorActionText)}}function Rt(o,i){if(o&1){let d=q();l(0,"div",18),C("click",function(){let e=M(d).$implicit,n=w(2);return x(n.handleImageClick(e))}),m(1,"img",19),a()}if(o&2){let d=i.$implicit;g(),h("src",d,Re)}}function At(o,i){if(o&1){let d=q();l(0,"div",11)(1,"h3"),u(2,"Please choose image"),a(),l(3,"div",12)(4,"div",13)(5,"h4"),u(6,"Uploaded images"),a(),l(7,"div",14),T(8,Rt,2,1,"div",15),a()(),l(9,"strong"),u(10,"OR"),a(),l(11,"div",16)(12,"input",17),C("change",function(e){M(d);let n=w();return x(n.onFileSelected(e))}),a()()()()}if(o&2){let d=w();g(8),h("ngForOf",d.uploadedImages)}}var O=function(o){return o.VIEW="VIEW",o.EDIT="EDIT",o}(O||{}),pe=(()=>{let i=class i{constructor(t,e){this.adminService=t,this.http=e,this.editorActionText="EDIT",this.editorState=O.VIEW,this.idPrefix="editor_id_",this.elementId="",this.removeComponent=new W,this.defaultMode=O.VIEW,this.editorHtml="",this.uploadedImages=[]}ngOnInit(){this.elementId=this.idPrefix+this.metadata.id,this.editorHtml=this.metadata.html,this.applyEditorMode(this.defaultMode),this.isText||this.adminService.getUploadedImages().subscribe(t=>{this.uploadedImages=t})}ngAfterViewInit(){}applyEditorMode(t){this.editorState=t,t===O.EDIT?this.editorActionText="SAVE":(this.editorActionText="EDIT",this.isPostCreated&&this.adminService.updatePostContent(this.metadata.post_id,H(z({},this.metadata),{html:this.editorHtml})).subscribe(e=>{console.log(e)}))}onEditorCreated(t){t.clipboard.dangerouslyPasteHTML(this.metadata.html)}toggleEditorMode(){this.editorState=this.editorState===O.VIEW?O.EDIT:O.VIEW,this.applyEditorMode(this.editorState),console.log(this.editorHtml)}handleRemoveComponent(){this.removeComponent.next(this.metadata.id)}handleImageClick(t){}onFileSelected(t){let e=t.target.files[0],n=new FormData;n.append("image",e,e.name),this.adminService.uploadImage(n).subscribe(r=>{this.uploadedImages.push(r.path)})}get isInEditMode(){return this.editorState===O.EDIT}get isPostCreated(){return this.metadata.post_id}get isText(){return this.metadata.elementType==="text"}};i.\u0275fac=function(e){return new(e||i)(c(L),c(de))},i.\u0275cmp=f({type:i,selectors:[["app-editor"]],viewQuery:function(e,n){if(e&1&&N(Dt,5),e&2){let r;V(r=F())&&(n.editorContent=r.first)}},inputs:{metadata:"metadata",defaultMode:"defaultMode"},outputs:{removeComponent:"removeComponent"},decls:3,vars:2,consts:[["stupidEditor",""],["editorContent",""],[1,"editor-container"],["class","editor-wrapper",3,"ngClass",4,"ngIf"],["class","image-editor-content",4,"ngIf"],[1,"editor-wrapper",3,"ngClass"],[1,"quill-wrapper",3,"hidden"],[3,"ngModelChange","onEditorCreated","styles","ngModel"],[1,"editor-content",3,"hidden","id","innerHTML"],[1,"actions"],[3,"click"],[1,"image-editor-content"],[1,"image-editor-wrapper"],[1,"uploaded-images-container"],[1,"uploaded-images-wrapper"],["class","uploaded-image",3,"click",4,"ngFor","ngForOf"],[1,"upload-image"],["type","file",3,"change"],[1,"uploaded-image",3,"click"],["alt","",3,"src"]],template:function(e,n){e&1&&(l(0,"div",2),T(1,Lt,11,9,"div",3)(2,At,13,1,"div",4),a()),e&2&&(g(),h("ngIf",n.isText),g(),h("ngIf",!n.isText))},dependencies:[ae,Z,Je,nt,ot,Oe],styles:[".main-horizontal-padding[_ngcontent-%COMP%]{padding:0 12.8rem}.first-section[_ngcontent-%COMP%]{margin-top:150px}.w-1-1[_ngcontent-%COMP%]{width:100%!important}.w-1-2[_ngcontent-%COMP%]{width:50%!important}.w-1-3[_ngcontent-%COMP%]{width:33.3333333333%!important}.editor-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:start;align-items:center;flex-direction:row;gap:4.8rem;margin-bottom:3.2rem;color:#fff}.editor-wrapper.editable[_ngcontent-%COMP%]{justify-content:space-between;gap:1.6rem}.editor-wrapper[_ngcontent-%COMP%]   .editor-content.editable[_ngcontent-%COMP%]{background-color:#fff;padding:1.6rem;border:.2rem solid #ffed00;outline:none}.image-editor-content[_ngcontent-%COMP%]{margin-bottom:3.2rem}.image-editor-content[_ngcontent-%COMP%]   .image-editor-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:start;align-items:center;flex-direction:row;gap:3.2rem}.uploaded-images-container[_ngcontent-%COMP%]   .uploaded-images-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:start;align-items:center;flex-direction:row;gap:3.2rem;margin-bottom:3.2rem}.uploaded-images-container[_ngcontent-%COMP%]   .uploaded-images-wrapper[_ngcontent-%COMP%]   .uploaded-image[_ngcontent-%COMP%]{width:100px;height:100px;border-radius:10%;overflow:hidden}.uploaded-images-container[_ngcontent-%COMP%]   .uploaded-images-wrapper[_ngcontent-%COMP%]   .uploaded-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-direction:row;width:15%}.actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-shrink:1;display:inline-block;font-weight:700;font-size:1.8rem;line-height:2.459rem;width:min-content;cursor:pointer;padding:4% 8%}"]});let o=i;return o})();var R=(()=>{let i=class i{constructor(){this.addElement=new W}};i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=j({token:i,factory:i.\u0275fac});let o=i;return o})();var mt=(()=>{let i=class i{constructor(t,e){this.elRef=t,this.renderer=e,this.hostElement=this.elRef.nativeElement,this.parentHostElement=this.hostElement.parentNode}ngOnInit(){this.renderer.setStyle(this.hostElement,"cursor","pointer"),this.wrapContent(),this.createIcon()}createIcon(){this.icon=this.renderer.createElement("span"),this.renderer.setStyle(this.hostElement,"position","relative"),this.renderer.setStyle(this.icon,"position","relative"),this.renderer.setStyle(this.icon,"left","30px"),this.renderer.setStyle(this.icon,"top","50%"),this.renderer.setStyle(this.icon,"fontSize","24px"),this.renderer.setStyle(this.icon,"align-self","center"),this.renderer.setStyle(this.icon,"cursor","pointer");let t=this.renderer.createText("EDIT");this.renderer.appendChild(this.icon,t),this.renderer.appendChild(this.contentWrapper,this.icon),this.renderer.listen(this.icon,"click",()=>this.toggleContentEditable())}wrapContent(){this.contentWrapper=this.renderer.createElement("div"),this.renderer.addClass(this.contentWrapper,"new-item-wrapper"),this.renderer.setStyle(this.contentWrapper,"display","flex"),this.renderer.setStyle(this.contentWrapper,"alignItems","center"),this.renderer.setStyle(this.contentWrapper,"justifyContent","flex-start"),this.renderer.insertBefore(this.parentHostElement,this.contentWrapper,this.hostElement),this.renderer.appendChild(this.contentWrapper,this.hostElement)}toggleContentEditable(){let t=this.hostElement.getAttribute("contentEditable")==="true";this.renderer.setAttribute(this.hostElement,"contentEditable",t?"false":"true"),t?this.renderer.removeClass(this.contentWrapper,"editable"):this.renderer.addClass(this.contentWrapper,"editable"),this.icon.childNodes[0].textContent=t?"EDIT":"SAVE",t||this.hostElement.focus()}focusOnElement(){this.hostElement.focus()}};i.\u0275fac=function(e){return new(e||i)(c($),c(D))},i.\u0275dir=ne({type:i,selectors:[["","appEditableNewsItem",""]],inputs:{options:"options"}});let o=i;return o})();var he=(()=>{let i=class i{constructor(){this.placeholder="Unesi tekst ovde...",this.addElement=new W}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=f({type:i,selectors:[["app-new-element-base"]],outputs:{addElement:"addElement"},decls:2,vars:0,template:function(e,n){e&1&&(l(0,"p"),u(1,"new-element-base works!"),a())}});let o=i;return o})();var ue=(()=>{let i=class i{constructor(t){this.newElementService=t}addElement(){this.newElementService.addElement.next({elementTag:this.elementTag,placeholder:this.placeholder,elementType:this.elementType})}};i.\u0275fac=function(e){return new(e||i)(c(R))},i.\u0275cmp=f({type:i,selectors:[["app-new-element-wrapper"]],inputs:{elementName:"elementName",elementTag:"elementTag",elementType:"elementType",placeholder:"placeholder"},decls:2,vars:1,consts:[[1,"element-type",3,"click"]],template:function(e,n){e&1&&(l(0,"div",0),C("click",function(){return n.addElement()}),u(1),a()),e&2&&(g(),K(n.elementName))}});let o=i;return o})();var ht=(()=>{let i=class i extends he{constructor(){super(),this.elementTag="p",this.elementName="Tekstualni editor",this.elementType="text"}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=f({type:i,selectors:[["app-new-element-paragraph"]],features:[G],decls:1,vars:4,consts:[[3,"elementName","elementTag","elementType","placeholder"]],template:function(e,n){e&1&&m(0,"app-new-element-wrapper",0),e&2&&h("elementName",n.elementName)("elementTag",n.elementTag)("elementType",n.elementType)("placeholder",n.placeholder)},dependencies:[ue]});let o=i;return o})();var ut=(()=>{let i=class i extends he{constructor(){super(),this.elementTag="img",this.elementName="Slika",this.elementType="image"}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=f({type:i,selectors:[["app-new-element-image"]],features:[G],decls:1,vars:4,consts:[[3,"elementName","elementTag","elementType","placeholder"]],template:function(e,n){e&1&&m(0,"app-new-element-wrapper",0),e&2&&h("elementName",n.elementName)("elementTag",n.elementTag)("elementType",n.elementType)("placeholder",n.placeholder)},dependencies:[ue]});let o=i;return o})();var Bt=["dialog"],ft=(()=>{let i=class i{constructor(t){this.newElementService=t,this.newElementService.addElement.subscribe(e=>this.onDialogClose(e))}openDialog(){this.dialog.nativeElement.showModal()}onDialogClose(t){this.dialog.nativeElement.close()}};i.\u0275fac=function(e){return new(e||i)(c(R))},i.\u0275cmp=f({type:i,selectors:[["app-new-item-adder"]],viewQuery:function(e,n){if(e&1&&N(Bt,5),e&2){let r;V(r=F())&&(n.dialog=r.first)}},decls:9,vars:0,consts:[["dialog",""],[3,"click"],[1,"element-type-container"]],template:function(e,n){if(e&1){let r=q();l(0,"button",1),C("click",function(){return M(r),x(n.openDialog())}),u(1,"Dodaj Sadrzaj"),a(),l(2,"dialog",null,0)(4,"h2"),u(5,"Izaberi element"),a(),l(6,"div",2),m(7,"app-new-element-paragraph")(8,"app-new-element-image"),a()()}},dependencies:[ht,ut],styles:[".main-horizontal-padding[_ngcontent-%COMP%]{padding:0 12.8rem}.first-section[_ngcontent-%COMP%]{margin-top:150px}.w-1-1[_ngcontent-%COMP%]{width:100%!important}.w-1-2[_ngcontent-%COMP%]{width:50%!important}.w-1-3[_ngcontent-%COMP%]{width:33.3333333333%!important}dialog[_ngcontent-%COMP%]{width:70%}.element-type-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-direction:row;flex-wrap:wrap}.element-type-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{border:.2rem solid #ffed00;padding:1.6rem;flex-basis:calc((100% - 6.4rem) / 3);margin-bottom:1.6rem;cursor:pointer}"]});let o=i;return o})();var Ut=["newsContent"],Gt=["newItemAdderWrapper"],Jt=["postTitleRef"];function Kt(o,i){if(o&1){let d=q();l(0,"app-editor",13),C("removeComponent",function(e){M(d);let n=w();return x(n.handleRemoveComponent(e))}),a()}if(o&2){let d=i.$implicit,t=w();h("metadata",d)("defaultMode",t.defaultEditorMode)}}var Se=(()=>{let i=class i{constructor(t,e,n,r,s,p,v){this.newElementService=t,this.renderer=e,this.cfr=n,this.appRef=r,this.adminService=s,this.router=p,this.activatedRoute=v,this.serial=0,this.postTitle="Naslov Vesti",this.postExists=!1,this.existingPost={},this.defaultEditorMode=O.VIEW,this.addedElements=[],this.newElementService.addElement.subscribe(E=>{this.addedElements.push(H(z({},E),{serial_number:this.serial++})),this.defaultEditorMode=O.EDIT}),this.activatedRoute.paramMap.subscribe(E=>{let I=E.get("id");if(!I){this.postExists=!1;return}this.postExists=!0,this.adminService.getPostById(I).subscribe(y=>{this.existingPost=y,this.postTitle=y.title,this.addedElements=y.contents.map(_=>z({},_)),this.initTitle()})})}ngAfterViewInit(){this.newElementService.addElement.next({serial_number:this.serial++,elementType:"image"}),this.postExists||this.initTitle()}handleRemoveComponent(t){let e=this.addedElements.findIndex(n=>n.id===t);e!==-1&&this.addedElements.splice(e,1)}handleTitleChange(t){this.postTitle=this.postTitleRef.nativeElement.innerText}initTitle(){this.postTitleRef.nativeElement.innerText=this.postTitle}saveItems(){console.log(this.editorComponents);let t=[];t=this.editorComponents.map(n=>({id:n.metadata.id,serial_number:n.metadata.serial_number,elementType:n.metadata.elementType,html:n.editorHtml}));let e={contents:t,title:this.postTitle};this.postExists?(e.id=this.existingPost.id,this.adminService.updatePost(e).subscribe(n=>{this.router.navigate(["admin"])})):this.adminService.addPost(e).subscribe(n=>{this.router.navigate(["admin"])})}};i.\u0275fac=function(e){return new(e||i)(c(R),c(D),c(Ae),c(Ue),c(L),c(X),c(Ye))},i.\u0275cmp=f({type:i,selectors:[["app-news-builder"]],viewQuery:function(e,n){if(e&1&&(N(Ut,7),N(Gt,5),N(Jt,5),N(pe,5)),e&2){let r;V(r=F())&&(n.newsContent=r.first),V(r=F())&&(n.newItemAdderWrapper=r.first),V(r=F())&&(n.postTitleRef=r.first),V(r=F())&&(n.editorComponents=r)}},decls:17,vars:1,consts:[["postTitleRef",""],["newsContent",""],["newItemAdderWrapper",""],[1,"news-builder-section","first-section"],[1,"news-header"],["appEditableNewsItem","",3,"input"],[1,"thumbnail"],["src","assets/2u1.jpeg","alt",""],[1,"news-content"],["class","builder-row",3,"metadata","defaultMode","removeComponent",4,"ngFor","ngForOf"],[1,"builder-row"],[1,"save-items"],[3,"click"],[1,"builder-row",3,"removeComponent","metadata","defaultMode"]],template:function(e,n){if(e&1){let r=q();m(0,"app-navigation"),l(1,"section",3)(2,"div",4)(3,"h1",5,0),C("input",function(p){return M(r),x(n.handleTitleChange(p))}),a(),l(5,"div",6),u(6," Slika clanka: "),m(7,"img",7),a()(),l(8,"div",8,1),T(10,Kt,1,2,"app-editor",9),l(11,"div",10,2),m(13,"app-new-item-adder"),a(),l(14,"div",11)(15,"button",12),C("click",function(){return M(r),x(n.saveItems())}),u(16,"SAVE POST"),a()()()()}e&2&&(g(10),h("ngForOf",n.addedElements))},dependencies:[ce,Z,mt,ft,pe],styles:[".main-horizontal-padding[_ngcontent-%COMP%]{padding:0 12.8rem}.first-section[_ngcontent-%COMP%]{margin-top:150px}.w-1-1[_ngcontent-%COMP%]{width:100%!important}.w-1-2[_ngcontent-%COMP%]{width:50%!important}.w-1-3[_ngcontent-%COMP%]{width:33.3333333333%!important}.news-builder-section[_ngcontent-%COMP%]   .news-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-direction:row;margin-bottom:30px;border-bottom:.2rem solid white}.news-builder-section[_ngcontent-%COMP%]   .news-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0}.builder-row[_ngcontent-%COMP%]{margin-bottom:3.2rem}.thumbnail[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;flex-direction:column}.thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:150px;height:150px;object-fit:cover}.new-item-adder[_ngcontent-%COMP%]{margin-top:2.4rem}",".main-horizontal-padding[_ngcontent-%COMP%]{padding:0 12.8rem}.first-section[_ngcontent-%COMP%]{margin-top:150px}.w-1-1[_ngcontent-%COMP%]{width:100%!important}.w-1-2[_ngcontent-%COMP%]{width:50%!important}.w-1-3[_ngcontent-%COMP%]{width:33.3333333333%!important}.new-item-wrapper.editable[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{all:unset;min-width:80%;background-color:#fff;color:#000;padding:.8rem}"]});let o=i;return o})();var gt=(()=>{let i=class i{intercept(t,e){return e.handle(t).pipe(Ve(n=>n instanceof Ke?n.clone({body:n.body.data}):n))}};i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=j({token:i,factory:i.\u0275fac});let o=i;return o})();var vt=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=B({type:i}),i.\u0275inj=Q({providers:[L,{provide:Ze,useClass:gt,multi:!0}],imports:[k,Xe]});let o=i;return o})();var mn=(()=>{let i=class i{};i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=B({type:i}),i.\u0275inj=Q({providers:[R],imports:[et.forChild([{path:"",component:dt},{path:"news-generator",component:Se},{path:"news-generator/:id",component:Se}]),st,k,rt,vt,ct.forRoot({theme:"snow"})]});let o=i;return o})();export{mn as AdminPanelModule};
